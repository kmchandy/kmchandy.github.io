<!DOCTYPE html>
<html lang="en">
<title>Model</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Model.html">Review Module: Hoare Triples</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="ModelExample.html">Examples</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="ModelSelfTest.html">Self Tests</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="ModelExercises.html">Exercises</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="ModelExplorations.html">Explorations</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_4_1/RunningExample.html">Next:Example of System</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_4/Model.html">Previous:
  Model of State Transition Systems</a>

</nav>



<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    
    <!------------------------------------------------------->
    <h1 class="w3-text-teal">State-Transition Systems</h1>
    
    <p>
    This module describes a state transition system which is
    the model of concurrent systems that we use in this course.
    </p>


		      A system is defined by:
		      <ol>
			<li> a set \(S\) of states,
			</li>
			<li> a subset \(init \subseteq S\) of initial states,
			</li>
			<li>
			a set \(A\) of actions, and
			</li>
			<li>
			a subset \(F \subseteq A\) of actions called
			the set of fair actions.
			</li>
		      </ol>
		      </p>

		      <p>
  
		      An action is a <a
		      href="https://en.wikipedia.org/wiki/Serial_relation"> 
		      left-total binary relation</a> on states. For an action
		      \(a\) we represent this relation by
		      \(\stackrel{a}{\rightarrow}\) where 
		      \(
		      s \stackrel{a}{\rightarrow} s'
		      \)
		      indicates that if action \(a\) is executed when
		      the system is in state \(s\) then the next state
		      can be \(s'\).
		      Every action can
		      be executed in every state:
		      For
		      every action \(a\) and state \(s\) there exists
		      a state \(s'\) such that \(s
		      \stackrel{a}{\rightarrow} s'\).
		      </p>

		      <p>

  There can be more than one allowable next state when an
  action \(a\) is executed in a state \(s\). For instance the relation
  may include the triples: \(s \stackrel{a}{\rightarrow} t\) and \(s
  \stackrel{a}{\rightarrow} r\) where \(t\) and \(r\) are different
  states. When action \(a\) is executed in state \(s\), the next state
		      could be \(t\) or \(r\).
		      </p>

		        
  <h3 class="w3-text-teal">Paths and Trajectories</h3>

  A <i>path</i> is an infinite sequence of pairs \((s_{i},
  a_{i}), i \geq 0\) where \(s_{i}\) is the \(i\)-th state in the sequence and
  \(a_{i}\) is the \(i\)-th action in the sequence, and
  <ol>
    <li>
    
    \(s_{0} \in init\) is an initial state.
    
    </li>
    <li>
    
    \(
    s_{i} \stackrel{a_{i}}{\rightarrow} s_{i+1} 
    \), for \(i \geq 0\).
    
    </li>
  </ol>

  A <i>system trajectory</i> is a path in which every fair
  action \(a \in F\) appears infinitely often. 
    

  <h3 class="w3-text-teal">Systems Represented as Labeled Directed Graphs</h3>
  
  A state of the system is represented as a vertex of the graph, and
  action is represented by a labeled directed edge.
  From the definitions: A system trajectory is a fair path in the
  graph. (Recall that a fair path, defined in the
  <a href="../Chapter_2/Progress.html">module on progress</a>, is one
  in which every fair label appears infinitely often.)

  <h3 class="w3-text-teal">State given by Values of Variables</h3>
  A system has a set of variables, and states of the system are
  determined  by the values of its variables. The initial condition \(init\) is a
  predicate on the variables.
  </p>

  <p class="w3-text-teal">Specifying Actions</p>
  <p>
  An action \(a\) can be specified in different ways. An
  action may be specified by a statement or program. For example, an
  action \(a\) that increments the value of a variable \(x\) by 1 can be
  specified by the statement in Python or C as:
  </p>
  <p>
  <code> x = x + 1 </code>
  </p>
  <p>
  Variables that are not mentioned in a statement or program are left
  unchanged by the action. For example, if \(y\) is a variable of the
  program then the execution of <code> x = x + 1 </code> leavs \(y\)
  unchanged. 
  </p>
  An action may also be specified by a set of Hoare triples. For
  example, incrementing \(x\) by 1 may be specified as:
  <p>
  \(
  \forall k: \{x = k\} a \{x = k+1\}
  \)
  </p>
  where the action \(a\) satisfies all the triples in the set.
  </p>

  <p>An action may
  also be specified, as in
  <a href="https://en.wikipedia.org/wiki/Temporal_logic_of_actions">
  TLA</a>, by denoting the values of variables
  after the action with a prime, as in:
  </p>
  \(
  x' = x + 1
  \)
  </p>

  <h3 class="w3-text-teal">Operators specified with Predicates</h3>
  In the
  <a href="Predicates.html">module on predicates</a> we showed how
  concepts such as \(\rightarrow\), which were initially defined in
terms of vertex sets, are reinterpreted in terms of predicates. Next,
we describe the relations in terms of states and actions.
In the
  following \(P\) and \(Q\) are predicates on states.
  </p>

  <p>
\(P \rightarrow Q\) holds exactly when all
  actions of the system  that are executed in a state in which \(P\)
holds terminate in a state in which \(Q\) holds.
</p>

<p>
\(P \leadsto Q\) holds exactly when every
  trajectory from every state in which \(P\) holds visits a
  state in which \(Q\) holds.
</p>


  <p>
\(P \stackrel{*}{\rightarrow} Q\) holds exactly when \(Q\) holds for
  every state visited on every trajectory
  that starts in a state in which \(P\) holds. It is easy
  to see that the definition, initially given in terms of paths, is
  equivalent to one in terms of trajectories (fair paths).
</p>

<h1 style="color:red;">Example</h1>
We use the example of the <i>earliest meeting time</i> given in the
module
<a href="RunningExample.html">A Running Example</a>.
</p>

<h4 style="color:red;">States</h4>
<p>
The states of the system are given by the values of \(t\) which is any
vector of 3 nonnegative integers. We will design a system so that
in every state, in every trajectory, there is no common meeting time
earlier than \(t_{j}\) for all \(j\).
</p>

<h4 style="color:red;">Initial Conditions</h4>
<p>
The initial condition is the predicate: \(t = [0, 0, 0]\).
Note, however, that a weaker initial condition that will also
work is: \(t \leq M\).
</p>

<h4 style="color:red;">Actions</h4>
<p>
We have many options for specifying actions; we can specify them using
a programming language, Hoare triples, or the primed notation. Also,
there are different sets of actions that satisfy the
specifications. Here we give one example of a set of actions. And in
this example, actions are specified using
Hoare triples.
</p>

<h4 style="color:red;">Actions Executed Infinitely Often</h4>
<p>
Action \(a_{i,j}\) for all \(i \neq j\) :
</p>

<p>
\(
\{ t=T \} \; a_{i,j} \; \{\; t_{j} = max(T_{i}, T_{j}) \; \}
\)
</p>


<p>
Action \(b_{j}\) for all \(j\):
</p>

<p>
\(
\{ t=T \} \; b_{j} \; \{\; t_{j} = f_{j}(T{j}) \; \}
\)
</p>

<p>
Each action \(a_{i,j}\) is executed infinitely often and so is each
action \(b_{j}\).
</p>

<p>
In our example, if \(T = [3, 5, 7]\), then Maya's 
actions, \(a_{1, 0}\) and \(a_{2, 0}\), in that state are: \(t_{0} =
max(3, 5) = 5\) and \(t_{0} = max(3, 7) = 7\). Maya's action \(b_{0}\)
is: \(t_{0} = f_{0}(3) = 4\).
</p>

<h4 style="color:red;">Other Actions</h4>
Actions that may not be executed infinitely often represent errors or
situations outside the designer's control. Here we give an example to
illustrate such actions though the example does not represent errors.
</p>

<p>
Each agent \(j\) has an action \(c_{j}\) that may be executed an
arbitrary number of times in a trajectory. Action \(c_{j}\) is defined by the Hoare triple:
<br>
\(
\{ t=T \} \; c_{j} \; \{\; T_{j} \leq t_{j} \leq f_{j}(T_{j}) \; \}
\)
</p>

<p>
Action \(c_{2}\) for Eve in state [3, 5, 7] establishes the post condition:
\(
7 \leq t_{j} \leq f_{2}(7) = 9
\).
So, possible state transitions due to the executions of \(b_{2}\) in
this state are to the following states \([3, 5, 7], [3, 5, 8], [3, 5, 9]\).
</p>

<h4 style="color:red;">The Labeled Graph</h4>
The labeled graph for this system is too large to draw. So, in the figure
we show a few examples of state transitions. These transitions are due to actions \(a_{1, 0}\),
\(a_{2, 0}\), \(b_{0}\), and \(c_{2}\) executed in state \([3, 5, 7]\).
</p>

<figure>
  <img src="FairTransitions.jpg" alt="Fig2" style="width:50%">>
  <figcaption>Fig.1 - Fair Transitions for Maya</figcaption>
</figure>

<figure>
  <img src="UnFairTransitions.jpg" alt="Fig2" style="width:50%">>
  <figcaption>Fig.2 - Other Transitions for Eve</figcaption>
</figure>

<h4 style="color:red;">Example: Stable Predicates</h4>
For what values of \(T\) is \(t = T\) stable? The \(b\) actions change
\(t\) unless all the elements of \(T\) are identical, and the \(a\)
actions change \(t\) unless \(t_{j} = f_{j}(t_{j})\) for all
\(j\). Therefore:
</p>

<p>
\(
stable(t = T) \; \equiv \; \forall i, j: T_{i} = T_{j} =
f_{i}(T_{i}) = f_{j}(T_{j})
\)
</p>

<!---------------------------------------->
<h4 class="w3-text-teal">Practicalities</h4>
<p>
The model has at most one action in execution at a time. Multiple
actions can execute concurrently provided that no action modifies
variables that are being accessed by another action; this can be
ensured by locking shared variables.
</p>

<p>
The model does not address how to ensure that actions are executed
infinitely often. We will see later that there are multiple ways to do
so. One way is to have processes that execute continuously and that
repeatedly execute lists of actions.
</p>

<p>
We will discuss implementations of the model using shared variables,
message-passing channels, and processes, later in the course.
</p>

<!------------------------------------------------->
<h2 class="w3-text-teal">Summary</h2>
This module defines the model of concurrent systems that we use in
this course. 


<!---------------------------------------->
  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
