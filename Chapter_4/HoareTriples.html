<!DOCTYPE html>
<html lang="en">
<title>ReviewOfHoareTriples</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Overview.html">Chapter: State Transition Systems</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Predicates.html">Review of Predicates</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="HoareTriples.html">Review of Hoare Triples</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="RunningExample.html">A Running Example</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="Model.html">State Transition Systems</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="ProofsOfSafety.html">How to Prove Safety</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="ProofsOfProgress.html">How to Prove Progress</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Formulae.html">Helpful Formulae</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_5/Overview.html">Next Chapter: Diffusing Computations</a>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_3/Overview.html">Previous Chapter:
  Temporal Logic Concepts</a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    
    <!------------------------------------------------------->
    <h1 class="w3-text-teal">Review of Hoare Triples</h1>
    
    <p>
    This module contains a review of Hoare Predicates and describes
    how Hoare triples can be used to specify actions.
    </p>


A <a
  href="https://en.wikipedia.org/wiki/Hoare_logic">Hoare triple</a>
has the form \(\{P\} c \{Q\}\) where \(P\) and \(Q\) 
  are predicates and \(c\) is a command. A command could be a
  statement of a program, an entire program, an action in hardware, or
  any other change of state in a system such as temperature
  increasing. \(P\) is called the precondition and \(Q\) the
  postcondition. The meaning of the triple is that if \(P\) holds when
  the command \(c\) is initiated then execution of the command
  terminates and \(Q\) holds upon termination. (Note: We assume total
  rather than partial correctness.)
  </p>
  
  <h4 style="color:red;">Examples</h4>
  Examples of Hoare triples for the assignment statement \(x := x+1\)
  are: 
  </p>
  <p>
  \(
  \{x = 0\} \;  x := x+1 \; \{x = 1\}
  \)
  </p>
  <p>
  \(
  \{x = 0\} \; x := x+1 \; \{x > 0\}
  \) 
  </p>
  <p>
  \(
  \{x = 1\} \;  x := x+1 \; \{x = 2\}
  \)
    </p>

    <h4 class="w3-text-teal">Variables not in the Triple</h4>
    Variables that are not mentioned in a Hoare triple are assumed,
    implicitly, to remain unchanged by the command. For example, if a
    program has variables \(x\) and \(y\), then the triple:
  <p>
  \(
  \{x = 0\} \;  x := x+1 \; \{x = 1\}
  \)
    </p>
    is implicitly equivalent to:
    <p>
  \(
  \forall k: \{(x = 0) \wedge (y=k) \} \;  x := x+1 \; \{(x = 1)
    \wedge (y = k)\}
  \)

    <h4 style="color:red;">Examples</h4>
    This example answers the inverse question: What state transitions
    satisfy <i>all</i> the following Hoare triples?

    <ol>
      <li>
\(
\{x < 0\} \; c \; \{(x = 1) \vee (x = 2)\}
\)
</li>
<li>
\(
\{x > 0\} \; c \; \{(x = 0) \vee (x = -1)\}
\)
</li>
<li>
\(
\{x > 1\} \; c \; \{x < 0\}
\)
</li>
</ol>


<p style="color:red;">Example</p>
    <p>
    Let's look at transitions from example states. What transitions
are possible from a state in which \(x = -1\) by a command \(c\) that
    satisfies the above three Hoare triples?
</p>

<p>The transition must
    satisfy all three Hoare triples. Since the state satisfies the
    first precondition, \(x < 0\), the state after the transition must
    satisfy the postcondition, \((x = 1) \vee (x = 2)\). The
    remaining Hoare triples don't address the precondition \(x =
-1\). Therefore, the only transitions from \(x = -1\) are:
</p>
<p>
\(
(x = -1) \stackrel{c}{\rightarrow} (x = 1)
\)
</br>

\(
(x = -1) \stackrel{c}{\rightarrow} (x = 2)
\)
</p>

<p>
Variables that are not mentioned in the Hoare triple are assumed to
remain unchanged. For example, if the system has variables \(x\) and
\(y\), then the first transition, above, specifies a set of
transitions initiated in states all possible values of \(y\).
</p>

<p>
\(
\forall k: (x = -1) \wedge (y = k) \stackrel{c}{\rightarrow} ((x = 1)
\wedge (y = k))
\)
</br>
<p style="color:red;">Example</p>
<p>
    What transitions
are possible from a state in which \(x = 2\)?
</p>

<p>
The first Hoare triple doesn't address the precondition \(x = 2\).
The precondition \(x > 0\) of the second triple holds when \(x = 2\)
and therefore its postcondition \((x = 0) \vee (x = -1)\) holds in the
next state.
The precondition \(x > 1\) of the third triple holds when \(x = 2\)
and therefore its postcondition \(x < 0\) holds in the
next state. Both postconditions, \((x = 0) \vee (x = -1)\) and \(x <
0\) hold in the next state, and so the only transition from \(x = 2\)
is:
</p>
<p>
\(
(x = 2) \stackrel{c}{\rightarrow} (x = -1)
\)
</p>

<p style="color:red;">Example</p>
<p>
    What transitions
are possible from a state in which \(x = 0\)?
</p>

<p>
None of the three preconditions hold when \(x = 0\), and therefore the
next state can be any state. So, transitions from \(x = 0\) are:
</p>

<p>
For all n:
\(
(x = 0) \stackrel{c}{\rightarrow} (x = n)
\)
</p>


<p style="color:red;">Example: Unimplementable Commands</p>
What transitions satisfy all the following Hoare triples?
<p>
\(
\{x = 0\} \; c \{x > 0\}, \quad \{x = 0\} \; c \{x < 0\}
\)
</p>
<p>
This command cannot be initiated in a state in which \(x = 0\) because
both postconditions \(x > 0\) and \(x < 0\) must hold when the command
terminates. We will ensure that the commands specified in our
algorithms can be executed in every state. (The next state may
be the same as the current state).
</p>

<h2 class="w3-text-teal">Specifying commands by Hoare triples</h2>
In this course, we specify actions in different ways. One way to
specify an action \(c\) is by a set of Hoare triples \(\{ \{P\} c
\{Q\} \}\), where the action must satisfy every triple in the set.
</p>

    
<!---------------------------------------->
  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
