<!DOCTYPE html>
<html lang="en">
<title>PropertiesOfTimelines</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>


<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="PropertiesOfTimelines.html">Properties of Timelines</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="PropertiesOfTimelinesExamples.html">Examples</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="PropertiesOfTimelinesSelfTest.html">Self Test</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="PropertiesOfTimelinesExercises.html">Exercises</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="PropertiesOfTimelinesExplorations.html">Explorations</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../GlobalSnapshots/GlobalSnapshots.html">
  Next: Global Snapshots</a> 
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../EarliestMeetingTime/EarliestMeetingTime.html">Previous:
  Example of Agents - Earliest Meeting Time
  </a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Properties of Timelines</h1><p>

<h3 class="w3-text-teal">Timelines are Acyclic</h3>
Timelines are acyclic because all edges in its graph are
    directed from earlier times to later times. 

<h3 class="w3-text-teal">Permuting events in a trajectory</h3>

    <p style="color:red;">Example</p>
    
    Consider the timeline for a trajectory,
    \(
s_{0} \stackrel{a_{0}}{\rightarrow} s_{1}
\stackrel{a_{1}}{\rightarrow} s_{2}
    \)
    <p>
    The timeline is specified by the sequence of events \([e_{0},
    e_{1}]\) where \(e_{0}\) is the event \(s_{0}
    \stackrel{a_{0}}{\rightarrow} s_{1}\) and \(e_{1}\) is the event \(s_{1}
    \stackrel{a_{1}}{\rightarrow} s_{2}\).
    Consider the case where there are no paths from event \(e_{0}\) to
    event \(e_{1}\), or from \(e_{1}\) to \(e_{0}\), in the graph.
    An example of such a timeline is shown below.
    
    <figure>
    <img src="SwitchingEventsOneAndZero_0.jpg" alt="Fig1" style="width:80%">
    <figcaption>Fig.1: Timeline with events 0 and 1 in order</figcaption>
    </figure>
    
    <p>
    In the example, agent \(A\) modifies variable \(v\) in event
    \(e_{0}\), and agent \(B\) modifies variable \(w\) in event
    \(e_{1}\).
    In the figure, the labels for initial states are shown with a subscript 0 and the
    states after execution of an event with subscript 1.
    
    <p>
    Let the system state be the tuple
containing the states of \(A\), \(v\), \(B\), \(w\), in that
order. Then:
<p>
\(
s_{0} = (A_{0}, v_{0}, B_{0}, w_{0})
\)
<br>
\(
s_{1} = (A_{1}, v_{1}, B_{0}, w_{0})
\)
<br>
\(
s_{2} = (A_{1}, v_{1}, B_{1}, w_{1})
\)
</p>

    <p>
    Now consider the timeline for the trajectory
    \(
s_{0} \stackrel{a_{1}}{\rightarrow} s'_{1}
\stackrel{a_{0}}{\rightarrow} s'_{2}
    \)
    in which the order of
    execution of \(a_{0}\) and \(a_{1}\) are switched. Note that this
    trajectory starts at the same initial state \(s_{0}\). The timeline is
    shown in the figure below.
    
    <figure>
    <img src="SwitchingEventsOneAndZero_1.jpg" alt="Fig2" style="width:80%">
    <figcaption>Fig.2: Timeline when order of events 0 and 1 are switched</figcaption>
    </figure>

    It's easy to verify that the <i>graphs</i> in both timelines are
identical.
The timelines are different because vertices of
the same graph appear in different orders in the timelines: 
     \(e_{0}\) before \(e_{1}\) in  the first timeline and \(e_{0}\)
after \(e_{1}\) in the second. Graphs do not specify orderings among
vertices, but timelines do.

<p>
The sequence of states in this trajectory are:
<p>
\(
s'_{0} = (A_{0}, v_{0}, B_{0}, w_{0})
\)
<br>
\(
s'_{1} = (A_{0}, v_{0}, B_{1}, w_{1})
\)
<br>
\(
s'_{2} = (A_{1}, v_{1}, B_{1}, w_{1})
\)
</p>

<p>
We see that \(s_{2} = s'_{2}\). The system states are the same after
both events 0 and 1, regardless of which event occurred first. Next,
we give a theorem that tells us what permutations of events in a
trajectory are also trajectories.




<h3 class="w3-text-teal">Theorem: Permuting Events in a Trajectory</h3>
Let \(G\) be the timeline graph of a trajectory \(T\) which starts in a
state \(s\) and ends in a state \(s'\) and which has an event sequence
\([e_{0}, \ldots, e_{m-1}]\).
Let \(E\) be any permutation of \([e_{0}, \ldots, e_{m-1}]\) that
satisfies the following condition:
<p>
<i>
\(e_{i}\) appears before  \(e_{j}\) in the permutation if edge
\((e_{i}, e_{j})\) exists in \(G\).
</i>
<p>
Then, there exists a trajectory with event sequence \(E\), that starts
in state \(s\) and ends in state \(s'\).

<p class="w3-text-teal">Proof</p>
Let \(G'\) be the timeline graph of a trajectory \(T'\) which starts in a
state \(s\) and which has an event sequence
\([e'_{0}, \ldots, e'_{m-1}]\) that is a permutation of the event
sequence for \(T\) and that satisfies the specified condition. We will
show by induction on \(j\) that the subgraph of \(G'\) consisting of
events \([e'_{0}, \ldots, e'_{j}]\), and vertices between them, is
also a subgraph of \(G\).

<p>
The base case is the empty sequence represented by the initial
state \(s_{0}\) and event \(e_{-1}\) which is common to both \(G\) and
\(G'\).

<p>
Assume that the theorem holds for some \(j\). From the specified
condition, all paths to \(e'_{j+1}\) are in the subgraph of \(G'\)
covering vertices \([e'_{0}, \ldots, e'_{j}]\). From the result in
<a href="../Agents/Agents.html">the module on agents</a> the output of 
\(e'_{i}\), for any \(i\), is a function of \(s_{0}\) and the events with paths to 
\(e'_{i}\). By the induction assumption, these paths are the same in the
subgraphs for \(G\) and \(G'\) that span vertices in \([e'_{0}, \ldots,
e'_{j}]\). Therefore the inputs to \(e'_{j+1}\) are the same in both 
\(G\) and \(G'\). And the result follows.

<p>
<h2 style="color:red;">Example</h2>
The figure below shows a timeline graph, \(G\).
Sequences \([e_{0}, e_{1}, e_{2 }, e_{3}, e_{4}, e_{5}]\) and 
\([e_{1}, e_{0}, e_{2 }, e_{4}, e_{3}, e_{5}]\), both have the
property that if there is an edge \((e_{i}, e_{j})\) in \(G\), then \(e_{i}\) appears
before \(e_{j}\) in this sequence.

From the corollary, both sequences of events are trajectories, 
starting in the same state, and ending in the same state. And both
trajectories have the same timeline graph.


<figure>
    <img src="SwitchingOrdersExample3_1.jpg" alt="Fig3" style="width:80%">
    <figcaption>Fig.3: Example 3 - Graphs with Permutations of Actions</figcaption>
</figure>

The following figure shows the same graph with events appearing from
left to right in the order of the sequence
\([e_{1}, e_{0}, e_{2 }, e_{4}, e_{3}, e_{5}]\).
<figure>
    <img src="SwitchingOrdersExample3_2.jpg" alt="Fig3" style="width:80%">
    <figcaption>Fig.3: Example 3 - Graphs with Different Ordering of Vertices</figcaption>
</figure>


<h2 class="w3-text-teal">Valid Cuts in Timelines</h2>
A subset of the events is called a <i>valid cut</i>
of the timeline graph exactly when all paths to events in the
subset are from events in the subset. Equivalently, a valid cut is a
subset of events such that there is no edge from an event outside the
cut to an event inside the cut.

<p>
The figure below shows a valid cut in a timeline graph. The events in
the subset that forms the valid cut are colored in black while events
outside are white. As you can see all paths to black
events are from black events. There may, however, also be paths 
from black events to white events. 

<figure>
    <img src="ValidCut.jpg" alt="Fig5" style="width:80%">
    <figcaption>Fig.5: A Valid Cut in a Timeline Graph</figcaption>
</figure>

<p>
The next figure below shows a set of events that is not a valid
cut. The events in the subset are shown in black and events
outside in white. The subset is not a valid cut because there is an
edge from an event outside the subset to an event inside the subset.

<figure>
    <img src="NotValidCut.jpg" alt="Fig6" style="width:80%">
    <figcaption>Fig.6: NOT a Valid Cut in a Timeline Graph</figcaption>
</figure>

<p class="w3-text-teal">The boundary of a valid cut</p>
A valid cut is also defined by its boundary which are points on
each agent and each shared-variable timeline such that all events in
the cut are before the boundary and all events outside the cut are
after the boundary.


<figure>
    <img src="BoundaryOfValidCut.jpg" alt="Fig7" style="width:80%">
    <figcaption>Fig.7: The Boundary of a Valid Cut</figcaption>
</figure>

<p>
In the figure, above, the points of the boundary are shown as yellow
circles. You can see that events in the cut - black events - are
before (i.e. to the left of) the boundary and events outside the cut
are after the boundary.

<p class="w3-text-teal">The system state associated with a valid
cut</p>
<p>
Recall that a system or global state is a tuple
with an element for each agent state and an element for the value of
each shared variable. Associated with a valid cut is a system state
defined by the state of each agent at the boundary and the value of
each shared variable at the boundary. Thus, the state is given by the
labels of the edges along the boundary.

<h2 class="w3-text-teal">The Valid-Cut Theorem</h2>
Let \(G\) be the timeline graph of a trajectory \(T\) that starts in
state \(s\) and ends in state \(s'\). Let \(c\) be the state
associated with a valid cut of \(G\). Then there exists a trajectory
that (1) starts in \(s\), (2) then visits state
\(c\), and (3) ends in the state \(s'\).


<p class="w3-text-teal">Proof</p>
The proof follows directly from the <i>Theorem: Permuting events in
a trajectory</i>. 


  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>
      

<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>

