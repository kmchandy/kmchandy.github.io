<!DOCTYPE html>
<html lang="en">
<title>Agents</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>


<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Agents.html">Agents, Shared Variables & Timelines</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExamples.html">Examples</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsSelfTest.html">Self Test</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExercises.html">Exercises</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExplorations.html">Explorations</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../EarliestMeetingTime/EarliestMeetingTime.html">
  Next: Example - Earliest Meeting Time</a> 
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../ShortestPath/ShortestPath.html">Previous:
  Examples of Loops
  </a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Agents & Global Snapshots</h1>

    <p>
    In this module we continue the discussion of the previous
    module. Here we introduce <i>agents</i>, and discuss timeline
    diagrams, valid cuts, and global snapshots in systems defined in
    terms of agents.

    </p>
    <h3 class="w3-text-teal">System</h3>
    A concurrent system consists of a set of agents and a set
    of variables.
    
    The state of the system is a tuple with an element 
    for the state of each agent and each shared variable.

    <p>
    An action of the system is executed by exactly one agent. An
    action may write some variables and only read (but not write)
    others. 
    An
    action executed by an agent may change the state of that agent,
    but leaves the states of all other agents unchanged. An action may
    change the state (value) of variables written by the action, and
    leaves the states of all other variables unchanged.


<!---------------------------------------------------->
<h2 class="w3-text-teal">Timeline Diagrams with Agents</h2>
    <!---------------------------------------------------->
    Timeline diagrams with agents are exactly the same as for any
    action system with the state of an agent treated exactly like any
    other variable.
 The sequence of events caused by the same
agent is called an agent timeline, and the sequence of events in which
the same variable is modified is called a variable timeline.

<p>
A vertex is shown as an ellipse, rather than a
point, to accommodate multiple incoming and outgoing edges.
Agent timelines are blue and variable timelines are red.
Edges to and from events in which a variable is read and left
unmodified are green.


<h2 style="color:red;">Example of a Timeline Diagram</h2>

<figure>
    <img src="AgentTimeline.jpg" alt="Fig2" style="width:100%">
    <figcaption>Fig.1: A Timeline Diagram with Agents</figcaption>
</figure>


<p style="color:red;">Example agent and shared variable timelines</p>
The figure above shows a timeline for a trajectory of a system
consisting of agents \(A, B, C\), shared variables \(v, w\).  and
events \(0, \ldots, 5\).

The events in this example are as follows:

<ul>
  <li>
  Event 0: \(B\) modifies \(w\).
  </li>
  <li>
  Event 1: \(A\) modifies \(v\).
  </li>
  <li>
  Event 2: \(C\) modifies \(w\).
  </li>
  <li>
  Event 3: \(A\) reads \(w\).
  </li>
  <li>
  Event 4: \(B\) reads \(w\) and modifies \(v\).
  </li>
  <li>
  Event 5: \(C\) modifies  \(w\).
  </li>
</ul>
</p>

<!------------------------------------------------->
<h2 class="w3-text-teal">Global Snapshots</h2>
<!------------------------------------------------->

<p class="w3-text-teal">Variables</p>
Let's look at an algorithm by which agents cooperate to determine a
global state at a valid cut of a timeline diagram. Each agent \(A\) records
its state in a local variable \(A_{snap}\). The value of this variable
is \(null\) before \(A\) records its state, and the value remains
unchanged after \(A\) records its state. Similarly, associated with
each variable \(v\), is a variable \(v_{snap}\) which is used only for
recording the global state. The value of \(v_{snap}\)
is \(null\) before \(v\)'s state is recorded, and remains
unchanged afterwards.

<p class="w3-text-teal">Initialization</p>
One or more agents starts the algorithm by recording their states. How
the algorithm starts is irrelevant.

<p class="w3-text-teal">Algorithm</p>
Before an agent \(A\) executes an event \(e\), the agent takes the following
steps:
<ol>
  <li>
  <i>Case 1: \(A\) hasn't recorded its own state</i>.
  <br>
  If the state of at least one of the
  variables referenced in \(e\) has been recorded then \(A\)
  records its state and the states of all unrecorded variables
  referenced in \(e\).
  </li>
  
  <li>
  <i>Case 2: \(A\) has recorded its own state</i>.
  <br>
  \(A\) records the states of all unrecorded variables
  referenced in \(e\).
  </li>
</ol>

<!------------------------------------------------->
<h4 style="color:red;">Illustration of the Algorithm</h4>
<!------------------------------------------------->
The next sequence of diagrams illustrates the algorithm.

<figure>
    <img src="TimelineDiagrams_Slide8.jpg" alt="Fig2" style="width:75%">
    <figcaption>Fig.2: Global Snapshot: Frame 1</figcaption>
</figure>

<figure>
    <img src="TimelineDiagrams_Slide9.jpg" alt="Fig3" style="width:75%">
    <figcaption>Fig.3: Global Snapshot: Frame 2</figcaption>
</figure>

<figure>
    <img src="TimelineDiagrams_Slide10.jpg" alt="Fig4" style="width:75%">
    <figcaption>Fig. 4: Global Snapshot: Frame 3</figcaption>
</figure>

<figure>
    <img src="TimelineDiagrams_Slide11.jpg" alt="Fig5" style="width:75%">
    <figcaption>Fig.5: Global Snapshot: Frame 4</figcaption>
</figure>



<!------------------------------------------------->
<h2 class="w3-text-teal">Proof of Correctness</h2>
<!------------------------------------------------->
Next we prove that the tuple of states of agents and variables
recorded by the algorithm is the state at a valid cut of the timeline
diagram. An event is in the cut exactly when the agent executing the event
and all variables referenced in the event are unrecorded before
executing the event. So, an event
is outside the cut if the state of the agent executing the event, or one of the variables referenced in the
event, has been recorded before the event.
<p>
Consider an event \(e\) outside the cut and any edge \(e, e'\).
We will prove that the cut is valid by showing that \(e'\) is outside
the cut.
<p>
If the state of the agent
executing \(e\) was recorded before \(e\) and \(e'\) is also executed
by the same agent then, by definition, \(e'\) is outside the cut.
If \(e'\) references a variable \(v\) which is also referenced in
\(e\), then \(v\) is recorded before \(e\) and hence is also recorded
before \(e'\), and so \(e'\) is outside
the cut.

<p>
A similar proof holds if a variable referenced in \(e\) is recorded
before \(e\).

  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>


      


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>