<!DOCTYPE html>
<html lang="en">
<title>Agents</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>


<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Agents.html">Agents, Shared Variables & Timelines</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExamples.html">Examples</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsSelfTest.html">Self Test</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExercises.html">Exercises</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExplorations.html">Explorations</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../EarliestMeetingTime/EarliestMeetingTime.html">
  Next: Example - Earliest Meeting Time</a> 
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../ShortestPath/ShortestPath.html">Previous:
  Examples of Loops
  </a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Agents and Shared Variables</h1>

    </p>
    A concurrent system consists of a set of agents and a set
    of shared variables.
    
    The state of the system is a tuple with an element of the tuple
    for the state of each agent and an element for the state
    (i.e. value) of each shared variable.

    <p>
    An action of the system references a subset of shared
    variables and the state of <i>at most one</i> agent.

    We say that an action \(a\) <i>is executed by</i> agent \(A\) exactly
    when \(a\) references the state of \(A\). Each action is executed by
    exactly one agent.

    <p>
    An action may read, but not modify some shared, variables and may
    modify other shared variables. A shared variable <i>referenced</i> by an
    action is one which is read or modified by the action.

    </p>

    <p>
    An action \(a\) executed by agent \(A\) is specified by Hoare
    triples of the form: \(\{P_{A}\} \; a \; \{Q_{A}\}\), where
    \(P_{A}\) and \(Q_{A}\) are predicates on the states of agent
    \(A\) and shared variables that the action references. The action
    is independent of the states of agents other than \(A\) and is
    also independent of variables that the action does not reference.
    </p>

    <h2 class="w3-text-teal">Agent Diagram</h2>
    The components of a system are its agents and its shared
    variables.
    
    The components are represented by an
    agent diagram which is a directed graph in which a vertex
    represents a component.
    An agent is represented by a circle and a shared variable by a
    rectangle. 
    The edges are directed
    either from an agent to a shared variable, or from a shared
    variable to an agent.

    There are no edges from an agent to an agent, or from a shared
    variable to a shared variable.
    
    <p>
    An edge from an agent \(A\) to a shared
    variable \(X\) indicates that \(A\) writes \(X\) in at least one
    action executed by \(A\). Likewise, an edge from a shared variable \(X\) to
    an agent \(B\) indicates that \(B\) reads \(X\) in at least one
    action executed by \(B\). Therefore, edges in both directions between an
    agent \(C\) and a shared variable \(Y\) indicates that there exists at
    least one action in which \(C\) reads \(Y\) and there exists at
    least one action in which \(C\) writes \(Y\).
    </p>

    <figure>
    <img src="AgentDiagram.jpg" alt="Fig1" style="width:80%">>
    <figcaption>Fig.1: An Agent Diagram</figcaption>
    </figure>

<!---------------------------------------------------->
<h1 class="w3-text-teal">Timelines</h1>
<!---------------------------------------------------->
A <a href="https://en.wikipedia.org/wiki/Timeline">timeline</a> of an
object shows (1) the sequence of events, in chronological order, that occur
to that object, and (2) the states of the object between events.

<p>
Consider a path through a system's state-transition graph
</p>
\(
s_{0} \stackrel{a_{0}}{\rightarrow} s_{1}
\stackrel{a_{1}}{\rightarrow}
\ldots \stackrel{a_{m-1}}{\rightarrow} s_{m}
\)
</p>
where the initial state is \(s_{0}\), and execution of action
\(a_{i}\) takes the system from state \(s_{i}\) to \(s_{i+1}\), all
\(i\). This path represents a system trajectory that starts at state
\(s_{0}\), traverses states \([s_{1}, s_{2}, \ldots]\) in order, and
terminates at state \(s_{m}\). 

<p>
Each state \(s_{i}\) in the trajectory is a system state: it is
a tuple with an element for the state of each agent and each shared
variable. Let \(pre_{i}\) and \(post_{i}\) be the parts of the tuples,
\(s_{i}\) and \(s_{i+1}\), respectively, that only
contain the states of the components referenced in action
\(a_{i}\). 

<p>
For example, consider a system with agents \(A\) and \(B\)
and shared variables \(x\) and \(y\). The state of the system is a
tuple \((s_{A}, s_{B}, s_{x}, s_{y})\) consisting of the states of 
\(A\), \(B\), \(x\) and \(y\). respectively. If action \(a_{i}\) is
executed by agent \(A\) and references only variable \(x\), then
\(pre_{i}\) and  \(post_{i}\) are the
values of tuple \([s_{A}, s_{x}]\) immediately before and after the
execution of action \(a_{i}\).

<p>
The \(i\)-th event in the trajectory is defined as the triple
\((pre_{i}, a_{i}, post_{i})\). The trajectory
can be specified by its initial state, \(s_{0}\) and the sequence of
events \(e_{0}, \ldots, e_{m-1}\). 

State \(s_{i+1}\) is a function of state \(s_{i}\) and event
\(e_{i}\). In \(s_{i+1}\), the states of components that are referenced in action
\(a_{i}\) are given in \(post_{i}\), and the states of the remaining
components are the same as in \(s_{i}\).


<p>
A <i>timeline</i> representation of a trajectory with initial state
\(s_{0}\) and event sequence \(e_{0},
\ldots, e_{m-1}\)
consists of:
<ol>
  <li>
  A labeled directed graph \(G\) in which each event \(e_{i}\) is
  represented by a vertex \(e_{i}\), and in which
  labeled directed edges are specified later.
  </li>

  <li>
  A total ordering \(e_{0}, \ldots, e_{m-1}\) of vertices.
  </li>
</ol>
<p>
In addition to vertices, \(e_{0}, \ldots, e_{m-1}\), \(G\) has a dummy
  vertex, \(e_{-1}\), which is usually not shown, and which represents
the start of the trajectory in the initial state \(s_{0}\).
</p>

<p class="w3-text-teal">Edges of the Timeline Graph</p>
The edges of the timeline graph capture the dependence between
events. All edges are directed from earlier to later events.
<ol>
  <li>
  <i>Agent Timelines</i>:
  Let \(e_{j}\) and \(e_{k}\) be events executed by an agent \(A\),
  where \(e_{k}\) is the earliest event after \(e_{j}\)
  executed by \(A\).
  There is an edge from \(e_{j}\) to \(e_{k}\). The edge is labeled
  with the \(A\)'s state after \(e_{j}\) and before \(e_{k}\).
  </li>
  <li>
  <i>Shared Variable Timelines</i>:
  Let \(e_{j}\) and \(e_{k}\) be events in which a shared variable
  \(v\) is modified
  where \(e_{k}\) is the earliest event after \(e_{j}\)
  that modifies \(v\).
  There is an edge from \(e_{j}\) to \(e_{k}\). The edge is labeled
  with the \(v\)'s state (i.e. its value) after \(e_{j}\) and before
  \(e_{k}\).
  </li>
  <li>
  <i>Event that Reads a Shared Variable</i>:
  Let \(e_{j}\) be an event that reads, but does not modify, a shared
  variable \(v\). Let \(e_{i}\) be the latest event before \(e_{j}\)
  that modifes \(v\).
  Let \(e_{k}\) be the earliest event after \(e_{j}\)
  that modifes \(v\).
  There are edges from \(e_{i}\) to \(e_{j}\) and from \(e_{j}\) to
  \(e_{k}\). These edges are labeled with the value of \(v\) that is
  read in event \(e_{j}\).
  </li>
</ol>


<p class="w3-text-teal">Convention in drawing timelines</p>
We adopt the convention that later events are shown towards the
right. 
The timeline of each agent and each shared variable is shown
as a horizontal line. A vertex is shown as an ellipse, rather than a
point, to accommodate multiple incoming and outgoing edges.

<p>


<h2 style="color:red;">Example</h2>

<figure>
    <img src="AgentTimeline.jpg" alt="Fig2" style="width:100%">
    <figcaption>Fig.2: A Timeline</figcaption>
</figure>


<p style="color:red;">Example agent and shared variable timelines</p>
The figure above shows a timeline for a trajectory of a system
consisting of agents \(A, B, C\), shared variables \(v, w\).  and
events \(0, \ldots, 5\).

Edges dealing with agents are shown in blue, and those
labeled with shared variables in red.

The events in this example are as follows:

<ul>
  <li>
  Event 0: \(B\) modifies \(w\).
  </li>
  <li>
  Event 1: \(A\) modifies \(v\).
  </li>
  <li>
  Event 2: \(C\) modifies \(w\).
  </li>
  <li>
  Event 3: \(A\) reads \(w\).
  </li>
  <li>
  Event 4: \(B\) reads \(w\) and modifies \(v\).
  </li>
  <li>
  Event 5: \(C\) modifies  \(w\).
  </li>
</ul>
</p>


<!------------------------------------------------------->
<h2 class="w3-text-teal">System State at an Instant</h2>
 A point \(T\) in a timeline is represented by a vertical line
corresponding to that point.
The system state at \(T\) is a tuple consisting of the states of agents and
shared variables at \(T\).
The state of an agent at \(T\) is the label of the edge, on the
agent's timeline, that is cut by the vertical line, \(T\).
Similarly, the value of a shared variable at \(T\) is the label of the edge, on the
variable's timeline, that is cut by the vertical line, \(T\).
<p>
Thus, the state of the system at \(T\) can be obtained from the edges of the
timelime that are cut by the the vertical line, \(T\).
</p>

<figure>
    <img src="SystemStateAtT.jpg" alt="Fig5" style="width:100%">
    <figcaption>Fig.5: System State at an Instant shown on Timeline</figcaption>
</figure>

We can obtain the sequence of system states in a trajectory from the
timeline diagram by determining the states for different values of \(T\).

  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>


      


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>

