<!DOCTYPE html>
<html lang="en">
<title>Agents</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>


<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="../index.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">About the Course</a>
    <a href="../table_of_contents.html" class="w3-bar-item w3-button w3-hide-small
    w3-hover-white">Table of Contents</a>
    <a href="../cross_reference.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Index</a>
  </div>
  </div>
 

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>

  <!-------------------------->
  <h3 class="w3-bar-item"><b>An Introduction to Distributed
  Algorithms</h3>
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="Agents.html">Agents, Shared Variables & Timelines</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExamples.html">Examples</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsSelfTest.html">Self Test</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExercises.html">Exercises</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="AgentsExplorations.html">Explorations</a>

  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_6_1/PropertiesOfTimelines.html">
  Next: Properties of Timelines</a> 
  
  <a class="w3-bar-item w3-button w3-hover-black"
  href="../Chapter_5_4/ShortestPath.html">Previous:
  Example of Shortest Path
  </a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <div class="w3-row w3-padding-64">
  <div class="w3-twothird w3-container">

    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Agents and Shared Variables</h1>

    </p>
    A concurrent system consists of a set of agents and a set
    of shared variables.
    
    The state of the system is given by the states
    of its agents and the values of shared variables.

    An action of the system changes values of a subset of shared
    variables and the state of <i>at most one</i> agent.

    We say that an action \(a\) <i>belongs to</i> agent \(A\) exactly
    when \(a\) changes the state of \(A\). Each action belongs to
    exactly one agent.

    Some actions may be fair and others unfair.

    </p>

    <p>
    An action \(a\) that belongs to agent \(A\) is specified by Hoare
    triples of the form: \(\{P_{A}\} \; a \; \{Q_{A}\}\), where
    \(P_{A}\) and \(Q_{A}\) are predicates on the states of agent
    \(A\) and shared variables that the action references. The action
    is independent of the states of agents other than \(A\) and is
    also independent of variables that the action does not reference.
    </p>

    <h2 class="w3-text-teal">Agent Diagram</h2>
    The agents and shared variables of a system are represented by an
    agent diagram which is a directed graph in which a vertex
    represents either an agent or a shared variable.
    An agent is represented by a circle and a shared variable by a
    rectangle. 
    The edges are directed
    either from an agent to a shared variable, or from a shared
    variable to an agent.
    <p>
    An edge from an agent \(A\) to a shared
    variable \(X\) indicates that \(A\) writes \(X\) in at least one
    action of \(A\). Likewise, an edge from a shared variable \(X\) to
    an agent \(B\) indicates that \(B\) reads \(X\) in at least one
    action of \(A\). Therefore, edges in both directions between an
    agent \(C\) and a shared variable \(Y\) indicates that there exists at
    least one action in which \(C\) reads \(Y\) and there exists at
    least one action in which \(C\) writes \(Y\).
    </p>

    <figure>
    <img src="AgentDiagram.jpg" alt="Fig1" style="width:80%">>
    <figcaption>Fig.1: An Agent Diagram</figcaption>
    </figure>

<!---------------------------------------------------->
<h1 class="w3-text-teal">Timelines</h1>
<!---------------------------------------------------->
A <a href="https://en.wikipedia.org/wiki/Timeline">timeline<a> of an
object shows the sequence of events, in chronological order, that occur
to that object, and the states of the object between events.

<p>
Consider a path through a system's state-transition graph
</p>
\(
s_{0} \stackrel{a_{0}}{\rightarrow} s_{1}
\stackrel{a_{1}}{\rightarrow}
\ldots \stackrel{a_{m-1}}{\rightarrow} s_{m}
\)
</p>
where the initial state is \(s_{0}\), and execution of action
\(a_{i}\) takes the system from state \(s_{i}\) to \(s_{i+1}\), all
\(i\). This path represents a system trajectory that starts at state
\(s_{0}\) and terminates at state \(s_{m}\).


The \(i\)-th <i>event</i>, \(e_{i}\), in this trajectory is defined as:
\(s_{i} \stackrel{a_{i}}{\rightarrow} s_{i+1}\).
The trajectory can be specified by the sequence of events \(e_{0},
\ldots, e_{m-1}\).

<p>
A <i>timeline</i> representation of a trajectory \(e_{0},
\ldots, e_{m-1}\)
consists of:
<ol>
  <li>
  A labeled directed graph \(G\) in which each event \(e_{i}\) is
  represented by a vertex (also called) \(e_{i}\), and in which
  labeled directed edges are specified later.
  </li>

  <li>
  A total ordering \(e_{0}, \ldots, e_{m-1}\) of vertices.
  </li>
</ol>
<p>
In addition to vertices, \(e_{0}, \ldots, e_{m-1}\), \(G\) has a dummy
  vertex, \(e_{-1}\), which is usually not shown, and which represents
the start of the trajectory.
</p>

<p class="w3-text-teal">Edges of the Timeline Graph</p>
Edges are directed from earlier to later events.

For each agent, there is an edge between successive events executed by the agent;
the edge is labeled with the state of the agent between the events.

Likewise, for each shared variable, there is an edge between successive events in which the
variable is modified; the edge is labeled with the value of the
variable between the events.


<p>
If a shared variable \(v\) is read, but not modified, in event
\(e_{j}\), and the earliest event after \(e_{j}\) that modifies \(v\) is \(e_{post}\), then
there is an edge from \(e_{j}\) to \(e_{post}\). Likewise, if 
\(e_{pre}\) is the latest event before \(e_{j}\) that modifies \(v\), then
there is an edge from \(e_{pre}\) to \(e_{j}\).
Both these edges are labeled
with the value of \(v\) in event \(e_{i}\). This is \(v\)'s value
between \(e_{pre}\) and \(e_{post}\).



<p class="w3-text-teal">Convention</p>
By convention later events are shown towards the right.
The timeline of each agent and each shared variable is shown
as a horizontal line. A vertex is shown as an ellipse, rather than a
point, to accommodate multiple incoming and outgoing edges and
horizontal lines for each agent and each vertex.

<p>


<h2 style="color:red;">Example</h2>

<figure>
    <img src="AgentTimeline.jpg" alt="Fig2" style="width:100%">
    <figcaption>Fig.2: A Timeline</figcaption>
</figure>


<p style="color:red;">Example agent and shared variable timelines</p>
The figure above shows a timeline for a trajectory of a system
consisting of agents \(A, B, C\), shared variables \(v, w\).  and
events \(0, \ldots, 5\).

Edges dealing with agents are shown in red, and those
labeled with shared variables in blue.

The events in this example are as follows:

<ul>
  <li>
  Event 0: \(B\) modifies \(w\).
  </li>
  <li>
  Event 1: \(A\) modifies \(v\).
  </li>
  <li>
  Event 2: \(C\) modifies \(w\).
  </li>
  <li>
  Event 3: \(A\) reads \(w\).
  </li>
  <li>
  Event 4: \(B\) reads \(w\) modifies \(v\).
  </li>
  <li>
  Event 5: \(C\) modifies  \(w\).
  </li>
</ul>
</p>


<!------------------------------------------------------->
<h4 class="w3-text-teal">An Event is Specified by the Labels of its Incident
Edges</h4>
The state after execution of an event \(e\) by an agent \(A\) depends
only on the states of \(A\) and the variables that \(A\) references in
the event. This state is independent of agents other than \(A\), and
is independent of variables that \(A\) does not reference in \(e\).
</p>

<p>
The \(i\)-th event is defined as \(s_{i} \stackrel{a_{i}}{\rightarrow}
s_{i+1}\) where \(s_{i}\) and \(s_{i+1}\) are system states.
A system state is a tuple of the states of all agents and shared variables.
If the \(i\)-th event is executed by agent \(A\) then the event
can be specified by \(s^{A}_{i} \stackrel{a_{i}}{\rightarrow}
s^{A}_{i+1}\) where \(s^{A}_{i}\) is only that part of system-state
tuple, \(s_{i}\), that deals
with the event. This part of the tuple consists only of \(A\)'s state
and the values of variables referenced in the
event. \(s^{A}_{i+1}\) is defined in the same way.

<figure>
    <img src="EventSpecifiedByIncidentEdges.jpg" alt="Fig3" style="width:100%">
    <figcaption>Fig.3: An Event is Specified by its Incident Edges</figcaption>
</figure>

\(s^{A}_{i}\) is determined by the labels of the input edges of
the event \(e_{i}\) and \(s^{A}_{i+1}\) is determined by the labels of
the output edges of the event.

<!------------------------------------------------------->
<h2 class="w3-text-teal">System State at an Instant</h2>
 A point \(T\) in a timeline is represented by a vertical line
corresponding to that point.
The system state at \(T\) is a tuple consisting of the states of agents and
shared variables at \(T\).
The state of an agent at \(T\) is the label of the edge, on the
agent's timeline, that is cut by the vertical line, \(T\).
Similarly, the value of a shared variable at \(T\) is the label of the edge, on the
variable's timeline, that is cut by the vertical line, \(T\).
<p>
Thus, the state of the system at \(T\) can be obtained from the edges of the
timelime that are cut by the the vertical line, \(T\).
</p>

<figure>
    <img src="SystemStateAtT.jpg" alt="Fig4" style="width:100%">
    <figcaption>Fig.4: System State at an Instant shown on Timeline</figcaption>
</figure>

We can obtain the sequence of system states in a trajectory from the
timeline diagram by determining the states for different values of \(T\).

  <footer id="myFooter">

    <div class="w3-container w3-theme-l1">
      <h4>An Introduction to Distributed Algorithms by K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus, California Institute of Technology</h4>
    </div>
  </footer>


      


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>

