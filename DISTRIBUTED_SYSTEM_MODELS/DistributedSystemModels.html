<title>DistributedSystemModels/DistributedSystemModels.html</title>
<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>


<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>
  
  <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">


<!--------------------------------------------------------->
    <h1 class="w3-text-teal">Models of Distributed Systems</h1>
<!----------------------------------------------------------------->

<p class="w3-text-red">
  <i>Central Ideas</i>:
  This page describes the model of distributed systems used in this
  website. The model is defined by the components, states, state
  transitions, and computations of the system.
  </p>

<p>
A distributed system consists of a set of agents and a set of
  communication channels.
  Agents have local variables that cannot be accessed by other agents.
  Agents communicate with other agents only by
  sending and receiving messages along channels.

  <p>
  Each channel has a name and is directed
from one agent to one agent.  Agents and channels are represented by a labeled
directed graph in which vertices represent agents and labeled directed
edges represent named channels.
  A channel from an agent \(A\) to an agent \(B\) is an
  <i>outgoing</i> channel of \(A\) and an <i>incoming</i> channel
  \(B\). An agent can send messages on its outgoing channels and
  receive messages on its incoming channels.

<h4 style="color:red;">Example Graph of Agents and Channels</h4>
The figure below shows connections in a system with agents A, B, C.

    <figure>
    <img src="DistributedSystemModels.001.jpeg" alt="Fig1" style="width:50%">
    <figcaption>Fig.1: Graph Representation of a Distributed Systems</figcaption>
  </figure>
  Here are a few examples of channels: channels \(t\) and \(x\) from
  agent \(C\) to agent \(B\); channel \(z\) from agent \(A\) to agent
  \(B\); and channel \(r\) from agent \(B\) to agent \(A\).

  <h2 class="w3-text-teal">States and Transitions</h2>
  The components of a system are its agents and channels.
  The state of a system is given by the states of its
  components. Next, we describe channel states and then agent states.

  
  <h3 class="w3-text-teal">Channel States and Transitions</h3>
  The state of a channel depends on the type of the channel.
  We begin with first-in-first-out (FIFO) channels and discuss other
  types later.
  
  <h4 class="w3-text-teal">Channel states</h4>
  The state of a FIFO channel is the
  <a href="https://en.wikipedia.org/wiki/Queue_(abstract_data_type)">
  queue</a> of messages in transit along
  the channel and that have not been received.

  
  <h5 class="w3-text-teal">Channel state transitions</h5>
A channel state can change in two ways.
<ol>
  <li>
  <i>Agent sends a message</i>: When sender sends a message along a
  channel the message is appended to the tail of the queue (the state).
  </li>
  <li>
  <i>A channel delivers a message</i>: When a non-empty channel delivers a
  message, the message at the head of the queue is deleted.
  </li>
</ol>


<h3 class="w3-text-teal">Agent States and Transitions</h3>

<h4 class="w3-text-teal">Agent states</h4>
Each agent has a set of variables that are <i>local</i> to the agent;
other agents and channels cannot access these variables.  An agent's
state is given by the values of its variables.

<p>
An agent may have a local clock; however, clocks are not synchronized
across agents. At a point in a trajectory, a clock in one agent may be
ahead, identical to, or behind, the clock of another agent.  We
discuss clock synchronization later.

<h4 class="w3-text-teal">Agent state transitions</h4>

An agent may change its state when it receives a message or it may
change state without receiving a message. Next, we describe an agent's
state transition when it receives a message. Later, we describe
<i>internal state transitions</i> in which an agent changes state
without receiving messages.


<h5 class="w3-text-teal">State transition when an agent receives a
message</h5> 
The message at the head of a nonempty channel may be delivered to the
receiver at any point.
Any message may be
delivered to any agent. Agents do not refuse to receive messages. Think of
messages as mail delivered by the traditional postal system; people
may discard mail after it is delivered in their mailboxes but they
don't guard mailboxes and prevent postal workers from delivering
mail.
<p>
When a message is delivered to an agent the agent may modify its local
variables and send messages. The new values of the agent's
variables and the messages it sends depend on the
message that the agent receives and the channel on which
the message is delivered.

<p style="color:red;">Example: Agent state transition upon receiving a message</p>
This example is of an agent \(A\) with an input channel \(x\) and
output channel \(y\). The agent has a local variable \(sum\). When the
agent receives a message it adds the content of the message (assumed
to be a number) to \(sum\) and send the resulting value of \(sum\) on
its output channel.
<pre>
upon receiving m on x:
    sum = sum + x
    send sum on y
</pre>
The agent takes some action if the message it receives is an
unexpected type. We will assume that in such cases the agent changes
to an \(error\) state.

<h5 class="w3-text-teal">Transition specification</h5>
For all agents \(A\), all states \(s\) of the agent, all incoming
channels \(c\) of \(A\), and all messages \(m\), there exists a state
transition of \(A\) from \(s\); this transition is specified by the
next state, \(s'\) of  \(A\), and for each outgoing channel the
message (if any) sent on the channel.

<p>
In the example, the state of the agent is given by the value of its
only local variable \(sum\). The transition is specified by the values
of \(sum\) before and after the transition and the message sent in the
transition.

<p>
An agent may ignore a message; in this case the transition is from a
state back to the same state, and the agent sends no messages in the
transition. 


<h4 class="w3-text-teal">Agent's internal state transition</h4>
For example, an agent may move its local clock forwards without
receiving a message.
A state transition by an agent without receiving a message is called
an <i>internal</i> or autonomous state transtion.

<p>
There may be agent states from which there are no internal
transitions; the only transitions from these states occur when an
agent receives a message.

<p style="color:red;">Example: Internal State Transition of an
Agent</p>
In this example, an agent has a local variable \(my\_clock\) and an
output channel \(y\). An
internal state transition increments this variable and also sends a
message when this variable equals 10.
<p>
Internal state transition
<pre>
my_clock = my_clock + 1
if my_clock = 10:
   send my_clock on y
</pre>


<p class="w3-text-teal">Transition specification</p>
An agent's internal transition from a state \(s\) is 
specified by the next state \(s'\)  of the agent and
for each outgoing channel the message (if any) sent on the
channel.

<p>
In the example, the transition is specified by the values of
\(my\_clock\) before and after the transition and the message (if any)
sent in the transition.


<h3 class="w3-text-teal">System States and Transitions</h3>
At most <i>one</i> agent changes state in a state transition.
The state of a system is a tuple with an
element of the tuple for the state of each component.
The states of one agent and its output channels and one of its input
channels can change in a transition; the states of all other agents
and channels remains unchanged.

<p>
A state transition is called an <i>event</i>, and a transition that
changes the state of an agent \(A\) is called <i>an event at
\(A\).</i> There may be an arbitrary number of transitions from a
state.

<p>
In the examples we specify an event at an agent by a program that
modifies the agent's local variables and the channels incident on
the agent. A state transition due to an agent receiving a message
<i>m</i> on a channel <i>x</i> has the preamble:
<pre>
upon receiving m on x:
</pre>
See the example given earlier.


<h4 style="color:red;">Example of System State Transitions</h4>
Consider a state \(S\) of the system shown in Fig 1 in which
all channels other than \(x\) and \(y\) are empty.  
<p>
There exist transitions from \(S\) due to:
<ol>
  <li>
  the delivery of the message at the head of channel \(x\) to agent
  \(B\)
  </li>
  <li>
  the delivery of the message at the head of channel \(y\) to agent
  \(C\)
  </li>
  <li>
  internal transitions of the agents.
  </li>
</ol>

<p>
Let \(S'\) be the state
after a transition from \(S\) due to the delivery of a message in
channel \(x\).
The states of agents \(A, C\) and channels \(u, v, t, z\) are the same
in \(S\) and 
\(S'\).  The state of channel \(x\) in \(S'\) is the same as its state
in \(S\) except that the message at the head of \(x\)'s state in \(S\)
is deleted.  The state of 
channel \(y\) in \(S'\) is the same as its
state in \(S\) except that messages sent in this
transition along \(y\)  are appended to the rear.

<p>
An example of an internal state transition is one in which agent \(A\)
increments a local variable and sends messages with the new
value of the variable on its output channels \(u\) and \(z\). In this
transition, the states of all agents other than \(A\), and the states
of all channels other than \(u\) or \(z\) remain unchanged.

<p>
The system may transit from \(S\) to any of the possible next
states. The relative speed of agents and channels is unknown.
Channel \(x\) may deliver its message, or channel
\(y\) may deliver its message, or one of the agents may execute
an internal transition next.



<h3 class="w3-text-teal">The State Transition Graph</h3>
The states and transitions of a system are represented by a directed
multigraph, called the state-transition graph in which each vertex
represents a state and each edge represents a state transition.


<p>
The figure below shows transitions from a system state \(S\) to system
states \(U, V, W\). 
<figure>
    <img src="../ChannelSnapshots/Timelines/Timelines.013.jpeg"
    alt="Fig2" style="width:60%"> 
    <figcaption>Fig.2: Example</figcaption>
</figure>

The transition due to the
delivery of a message from channel B, in the previous example, may be
represented by edge \((S, U)\) --- i.e., the transition from \(S\) to
\(U\) --- while \((S, V)\) and \((S, W)\) represent
transitions due to a message delivery from channel \(C\), and an internal
transition of an agent.


<h3 class="w3-text-teal">Computations</h3>

A <i>computation</i> is a sequence \([S_{0}, S_{1}, S_{2}, \ldots]\)
of one or more system states, where there exists a transition from
\(S_{i}\) to \(S_{i+1}\) for all \(i\).
The computation can also
be specified by  the initial state \(S_{0}\) and
a sequence of events \([e_{0}, e_{1}, e_{2}, \ldots] \)where
\(e_{i}\) specifies the transition from \(S_{i}\) to \(S_{i+1}\), for
all \(i\).
We call \(S_{i}\) and \(S_{i+1}\) the <i>pre</i> and <i>post</i>
states of event \(e_{i}\).
A computation is also an initial state and an execution of a sequence
of programs that cause the state transitions.

<p>
A computation is represented by a path in the state transition
graph. A path may start at any vertex of the graph and traverse an
arbitrary number of edges. We discuss computations in the
<a href="Timelines.html">pages on timelines.</a>

<h3 class="w3-text-teal">Different Types of Channels</h3>
Most of the algorithms in these notes use FIFO channels; however, we
also describe algorithms that use other types of channels. Models for
a couple of them are described next.

<p class="w3-text-teal">Out of order messages</p>
Messages may be delivered out of order in some types of channels,
though each message is delivered once. We represent the state of such
a channel as a bag or multiset. A message is sent by adding the
message to the bag and a message is delivered by removing the message
from the bag.

<p class="w3-text-teal">Lossy, multiple delivery channels</p>
In some channels the same message may be delivered repeatedly, and a
message sent later may be received before a message sent earlier.  We
represent the state of such a channel by a set.  A message is sent by
adding it to the set, and a message is delivered by delivering a copy
of any element in the set without modifying the set.

<h3 class="w3-text-teal">Summary</h3>
<p class="w3-text-red">
  <i>Central Ideas</i>:
States and state transitions of a distributed systems.
<p>

A state of the system is given by the states of its components -- agents
and communication channels. A
state transition may change the state of at most one agent, and the
state of at most one input channel of that agent, and the states of
output channels of that agent. A computation is a sequence of states
where there exists a transition from each state in the sequence to the
next.

<h3 class="w3-text-teal">Next</h3>
Next look at a
<a href="Example.html">simple example of a distributed system</a> or skip it to
read about
<a href="Timelines.html">key concepts -- timelines and cuts of
computations</a> -- which are used in a large number of distributed algorithms.

<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
