<title>FoundationsOfDistributedSystems/DistributedSystemsIntroduction/AgentLogs.html</title>
<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>
<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>

<nav
class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5
w3-animate-left" 
id="mySidebar">

<a href="javascript:void(0)"
onclick="w3_close()"
class="w3-right w3-xlarge w3-padding-large w3-hover-black
w3-hide-large"
title="Close Menu">
<i class="fa fa-remove"></i>
</a>

<!--END Heading  ---------------------------->
 
<!-- Start Sidebar----------> 
 
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroduction.html" > 
Distributed Systems Introduction
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/Timelines.html" > 
Timelines
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/AgentLogs.html" > 
Agent Logs and Cuts of Timelines
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/Example/Example.html" > 
Example
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroductionVideo.mp4" > 
Video
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroductionSelfTest.html" > 
SelfTest
</a>

</nav>
<!-- End Sidebar---------->
 
<!-- Start overlay ---------------------------------->

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large"
  onclick="w3_close()"
  style="cursor:pointer"
  title="close side menu"
  id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">

<!-- End overlay ---------------------------------->
<!--------------------------------------------------------->
<h2 class="w3-text-teal">Agent Logs and Cuts of Timelines</h2>
<!--------------------------------------------------------->
The theorem in the
<a href="/Timelines.html">Timelines module</a> is important and should be
viewed in multiple ways. One way is as follows. Suppose each agent
logs the sequence of events at that agent, i.e., the agent logs its
state before and after each of its event, the message (if any) received in the
event, and the messages (if any) sent in the event. In terms of a
timeline diagram, each agent records the labeled edges directed towards
and away from each of the agent's events (see figure below).

<h4 class="w3-text-teal">The Problem</h4>
Given the logs of all the agents how can we determine the trajectory
of the entire system --- the sequence of global states of the system?

<p style="color:red;">Example</p>
The figure below shows logs of each of the three agents in the example
given in the Timelines module.
<figure>
    <img src="Timelines/Timelines.006.jpeg" alt="Fig1" style="width:100%">
    <figcaption>Fig.1: Logs of Agents</figcaption>
</figure>
What are the ways in which these agent logs can be stitched together
to get a log of the trajectory of the global system?
In the Timelines module we saw at least two ways of composing the
agent logs. The two timelines are given again below
<figure>
    <img src="Timelines/Timelines.007.jpeg" alt="Fig2" style="width:100%">
    <figcaption>Fig.2: Different Timelines Composed from Same Logs of Agents</figcaption>
</figure>

<h4 class="w3-text-teal">Requirement for Composing Agent Logs to get a
Global System Trajectory</h4>

<p class="w3-text-teal">
Each message is received only <i>after</i> it is sent.
</p>
The result follows directly from the theorem.
<p>
The requirement is that all message lines in the timeline diagram are
directed towards later times, i.e. towards the right.

<p style="color:red;">Example</p>
Here is another timeline diagram that satisfies this requirement.
<figure>
    <img src="Timelines/Timelines.008.jpeg" alt="Fig3" style="width:80%">
    <figcaption>Fig.3: One More Timeline Composed Logs of Agents</figcaption>
</figure>

<h3 class="w3-text-teal">Cuts across Timelines</h3>
A consistent cut of a timeline diagram is a partition of the set
of events in the trajectory into <i>past</i> and <i>future</i> where
there is no edge from the future to the past.
  

<p style="color:red;">Example</p>
The figure below shows consistent cuts across two timeline diagrams
where past events are colored black and future events are green.
There is no edge directed from green to black.
<figure>
    <img src="Timelines/Timelines.009.jpeg" alt="Fig4" style="width:100%">
    <figcaption>Fig.4: Consistent Cuts</figcaption>
</figure>

Each agent has a point on its own timeline where events on that
agent before the point are in the past, and events  on that
agent after the point are in the future.

<h3 class="w3-text-teal">Theorem about Consistent Cuts</h3>
For any consistent cut, \([past, future]\),  of a timeline diagram of
a trajectory \(\tau\)
there exists a trajectory \(\tau'\) with the same events as \(\tau\)
where all past events occur before all future events in \(\tau'\).

<p class="w3-text-teal">Proof of Theorem on Consistent Cuts</p>
The intuitive idea of the proof is that we can get \(\tau'\), the
lower diagram, from \(\tau\), the upper diagram, by straightening the line
separating future from past in \(\tau\). As the line gets
straightened, some events move towards the right and others to the
left, while maintaining the key requirement that messages are received
only after they are sent.

<p>
A formal proof is based on induction in the order of events in
\(\tau'\). Assume that there exists a trajectory, starting from the
initial state, with \(n\) events and prove that there exists a
trajectory with \(n+1\) events.

<h4 class="w3-text-teal">Takeaway</h4>
Local agent trajectories can be stitched together to get global system
trajectories if all messages are received only after they are
sent. This requirement is obvious and useful. It leads to the theorem
on consistent cuts, which is the key to many algorithms by which an
agent learns properties of an entire system.
<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
