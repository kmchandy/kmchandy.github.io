<title>FoundationsOfDistributedSystems/DistributedSystemsIntroduction/Timelines.html</title>
<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>
<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>

<nav
class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5
w3-animate-left" 
id="mySidebar">

<a href="javascript:void(0)"
onclick="w3_close()"
class="w3-right w3-xlarge w3-padding-large w3-hover-black
w3-hide-large"
title="Close Menu">
<i class="fa fa-remove"></i>
</a>

<!--END Heading  ---------------------------->
 
<!-- Start Sidebar----------> 
 
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroduction.html" > 
Distributed Systems Introduction
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/Timelines.html" > 
Timelines
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/AgentLogs.html" > 
Agent Logs and Cuts of Timelines
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/Example/Example.html" > 
Example
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroductionVideo.mp4" > 
Video
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../DistributedSystemsIntroduction/DistributedSystemsIntroductionSelfTest.html" > 
SelfTest
</a>

</nav>
<!-- End Sidebar---------->
 
<!-- Start overlay ---------------------------------->

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large"
  onclick="w3_close()"
  style="cursor:pointer"
  title="close side menu"
  id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">

<!-- End overlay ---------------------------------->
<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Timelines</h2>
<!--------------------------------------------------------->
A timeline diagram depicts the evolution of a <i>single</i>
trajectory of a system over time.  A state transition of an agent
during this trajectory is called an <i>event</i> at that agent.

A timeline diagram is a labeled directed graph which is laid out in a
specific way.  Vertices of the graph represent events.  The graph has
an edge directed from an event at an agent to the next event at that
agent; the edge is labeled with the state of the agent between the two
events. 

<p>
The horizontal axis represents time.  Each agent has its own timeline
represented by a horizontal line with all events
of an agent on the same line.

<p>
A message \(m\) sent by an agent \(A\) at an event \(e\) and received
by an agent \(B\) at event \(e'\) is represented by an edge directed from
\(e\) to \(e'\), and this edge is labeled \(m\).


<h4 style="color:red;">Example</h4>
<figure>
    <img src="Timelines/Timelines.001.jpeg" alt="Fig1" style="width:100%">
    <figcaption>Fig.1: A Timeline Diagram</figcaption>
</figure>
This example shows a timeline diagram with two agents, \(A\) and
\(B\).  The vertices  A0, A1, A2, A3 represent events at agent \(A\);
likewise vertices B0, B1 B2,represent \(B\)'s events.

<p>
An edge along an agent's timeline is labeled with the state of that
agent at the point. For example, the edge from event A1 to event A2 is
labeled \(S[A1]\) which is agent \(A\)'s state after event A1 and
before event A2.

<p>
Event A1 is an example of an internal event in which an agent changes
state without receiving a message.
Event A2 is an example of an event in which an agent changes
state when it receives a message.

<p>
The diagram shows that
agent \(A\) sends message \(m_{0}\) in event A1 and this message is
received by agent \(B\) in event B1.

<h4 class="w3-text-teal">Channel States in Timeline Diagrams</h4>
The state of a channel \(c\) at time \(T\) is the sequence (in time
order) of messages that are sent along \(c\) before \(T\) and that are
received after \(T\). The state of \(c\) at \(T\) can be obtained from
the timeline diagram as the sequence of labels of edges representing
messages along \(c\) that are cut by the \(T\)-line, the vertical line
at \(T\).

<h4 style="color:red;">Example</h4>
<figure>
    <img src="Timelines/Timelines.002.jpeg" alt="Fig2" style="width:100%">
    <figcaption>Fig.2: Global State from a Timeline Diagram</figcaption>
</figure>
Figure 2 shows 
timeline diagram with agents \(A, B, D\). Agent \(A\) sends messages
\(m_{0}\) along a channel \(x\) and sends \(m_{1}\) along a different
channel \(c\) at event A1.  When agent \(D\) receives \(m_{0}\) at
event D1 it sends message \(r_{0}\) to \(A\) along a channel \(y\).
When agent \(A\) receives \(r_{0}\) at event A2 it sends message
\(m_{2}\) to \(B\) along channel \(c\).  When agent \(B\) receives
message \(m_{1}\) at event B1 it sends message message \(u_{0}\) to
\(A\) along a channel \(v\).

<p>
The state of \(c\) at time \(T\) is the sequence of labels, \([m_{1},
m_{2}]\), of edges representing messages on \(c\) that are cut by the
\(T\)-line.  The state of an agent \(A\) at \(T\) is the label of the
edge on \(A\)'s timeline cut by the \(T\)-line.  So, the global state
of the system at T can be obtained from labels of edges cut by the
\(T\)-line.


<h4 class="w3-text-teal">The Trajectory: Sequence of Global States</h4>
A trajectory is a sequence of <i>global</i> states.
The sequence of global states can be obtained from the timeline diagram
from the labels of edges cut by vertical lines before each event.

<h4 style="color:red;">Example</h4>
<figure>
    <img src="Timelines/Timelines.003.jpeg" alt="Fig3" style="width:100%">
    <figcaption>Fig.3: Global States in the Trajectory</figcaption>
</figure>
The sequence of events in this trajectory is: Initital events (A0, B0, D0)
in any order followed by the sequence A1, D1, A2, B1, A3, B2.

The figure shows vertical lines corresponding to different points in
the timeline diagram before each event.

<h4 class="w3-text-teal">Different Trajectories with Identical Graphs</h4>
Are there different trajectories with identical graphs?
Look at the next figure.

<figure>
    <img src="Timelines/Timelines.005.jpeg" alt="Fig5" style="width:100%">
    <figcaption>Fig.4: A Different Trajectory with Same Graph</figcaption>
</figure>
The trajectory in this diagram is specified by the sequence of events:
Initial events (A0, B0, D0) followed by the sequence A1, D1, B1,
A2, A3, B2.

<p>
The graphs of figures 3 and 4 are the same but the trajectories that
the figures represent are different.  In figure 4 event B1 occurs
before event A2 whereas in figure 3, B1 occurs after A2.  So, there is
a global state after B1 and before A2 in figure 4 that is never
visited in figure 3.
<p>
The <i>local</i> timelines of each agent --- i.e., the horizontal
lines in the diagram --- are identical in both figures; however, an
event B1 on an agent B occurs before an event A2 on a different agent
A, in figure 3, but the events appear in the reverse order in figure
4.
<p>
The following theorem captures the idea illustrated by figures 3 and
4.  

<h3 class="w3-text-teal">Theorem</h3>
Given a timeline diagram Z of a system, let Z' be another timeline
diagram with the same graph as D.  The local trajectory of each agent
is the same in both Z and Z'; however, an event
\(e\) on one agent which appears before an event \(e'\) on a different
agent in Z may appear in the reverse order in Z'.

<p>
A necessary and sufficient conditions for Z' to represent a trajectory
of the same system is that in Z' <i>each message is received only after
it is sent.</i>


<h4 class="w3-text-teal">Proof</h4>
The condition is necessary because there is no system in which a
message is received before it is sent. Next we show that the condition
is sufficient.
<p>
The proof is by induction on the sequence of events in Z'. Assume that
there exists a trajectory consisting of the first \(n\) events of Z'
where the inputs and outputs of each event in Z' are the same as those
of the corresponding events in Z. Let \(e\) be the \(n+1\)-th event in
Z'. By the induction assumption, the inputs to \(e\) are the same in Z
and Z'. Therefore, the outputs of \(e\) in Z' are the same as in Z.


<h4 class="w3-text-teal">Theorem in Terms of Timelines</h4>
Given a timeline diagram Z that represents a trajectory of a
system. Consider a diagram Z' obtained by moving vertices on each
horizontal line in Z to the right or left. Then Z' represents a trajectory
if and only if <i>all edges are directed forwards in time</i>,
i.e. towards the right.



<h4 class="w3-text-teal">Takeaway</h4>
Timelines are a familiar concept, helpful in
understanding distributed systems and other multi-agent
systems.
<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
