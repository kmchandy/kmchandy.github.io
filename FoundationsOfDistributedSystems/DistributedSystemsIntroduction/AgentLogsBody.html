<!--------------------------------------------------------->
<h2 class="w3-text-teal">Agent Logs and Cuts of Timelines</h2>
<!--------------------------------------------------------->
Let's look at the problem of reconstructing a log of events of the
global system given logs recorded by each agent of that agent's own
events.
Each agent records the sequence of events at that agent, and its own
local state before each event, and the messages sent and received (if
any) in each of its events.
In terms of a
timeline diagram, each agent records the labeled edges directed towards
and away from each of the agent's events (see figure below).



<h4 style="color:red;">Example</h4>
The figure below shows logs of each of the three agents in the example
given in the Timelines module.
<figure>
    <img src="Timelines/Timelines.006.jpeg" alt="Fig1" style="width:100%">
    <figcaption>Fig.1: Logs of Agents</figcaption>
</figure>

What global system trajectories can produce this collection of agent
logs?
In the Timelines module we saw at least two ways of composing the
agent logs. The two timelines are given again below
<figure>
    <img src="Timelines/Timelines.007.jpeg" alt="Fig2" style="width:100%">
    <figcaption>Fig.2: Different Timelines Composed from Same Logs of Agents</figcaption>
</figure>

The theorem tells us that any global sequence of events represents a
system trajectory if and only if:
<p class="w3-text-teal">
each message is received <i>after</i> it is sent.
</p>

<p style="color:red;">Example</p>
Here is another timeline diagram that satisfies this requirement.
<figure>
    <img src="Timelines/Timelines.008.jpeg" alt="Fig3" style="width:80%">
    <figcaption>Fig.3: One More Timeline Composed Logs of Agents</figcaption>
</figure>

<h3 class="w3-text-teal">Cuts across Timelines</h3>
A consistent cut of a timeline diagram is a partition of the set
of events in the trajectory into <i>past</i> and <i>future</i> where
there is no edge from the future to the past.
  

<p style="color:red;">Example</p>
The figure below shows consistent cuts across two timeline diagrams
where past events are colored black and future events are green.
There is no edge directed from green to black.
<figure>
    <img src="Timelines/Timelines.009.jpeg" alt="Fig4" style="width:100%">
    <figcaption>Fig.4: Consistent Cuts</figcaption>
</figure>

Each agent has a point on its own timeline where events on that
agent before the point are in the past, and events  on that
agent after the point are in the future.

<h3 class="w3-text-teal">Theorem about Consistent Cuts</h3>
For any consistent cut, \([past, future]\),  of a timeline diagram of
a trajectory \(\tau\)
there exists a trajectory \(\tau'\) with the same events as \(\tau\)
where all past events occur before all future events in \(\tau'\).

<p class="w3-text-teal">Proof of Theorem on Consistent Cuts</p>
The intuitive idea of the proof is that we can get \(\tau'\), the
lower diagram, from \(\tau\), the upper diagram, by straightening the line
separating future from past in \(\tau\). As the line gets
straightened, some events move towards the right and others to the
left, while maintaining the key requirement that messages are received
only after they are sent.

<p>
A formal proof is based on induction in the order of events in
\(\tau'\). Assume that there exists a trajectory, starting from the
initial state, with \(n\) events and prove that there exists a
trajectory with \(n+1\) events.

<h4 class="w3-text-teal">Takeaway</h4>
Local agent trajectories can be stitched together to get global system
trajectories if all messages are received only after they are
sent. This requirement is obvious and useful. It leads to the theorem
on consistent cuts, which is the key to many algorithms by which an
agent learns properties of an entire system.