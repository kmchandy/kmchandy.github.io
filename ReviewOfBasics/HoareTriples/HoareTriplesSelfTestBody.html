    <!------------------------------------------------------->
    <h1 class="w3-text-teal">Hoare Triples: Self Test</h1>

    <h3 class="w3-text-teal">Question 1</h3>
    Which of the following are True?
    <ol>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge (\{P'\} \;  c \; \{Q\}) \quad
      \Rightarrow \quad \{P \vee P'\} \;  c \; \{Q\}
      \)
      </li>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge ([P \Rightarrow P']) \quad
      \Rightarrow \quad \{P'\} \;  c \; \{Q\}
      \)
      </li>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge ([P' \Rightarrow P]) \quad
      \Rightarrow \quad \{P'\} \;  c \; \{Q\}
      \)
      </li>
      <li>
      <pre>
      {x > 10}
      if x > 0 then x = -3*x else x = 2*x
      {x < 30}
      </pre>
      </li>
      <li>
      <pre>
      {x < 10}
      if x < 0 then x = -3*x else x = 2*x
      {x < 30}
      </pre>
      </li>
      <li>
      <pre>
      {x > 0}
      x = x + 10
      x = 2*x
      {x > 20}
      </pre>
      </li>
    </ol>

    <h3 class="w3-text-teal">Question 2</h3>
    What is the weakest precondition \(P\) that satisfies the
    following Hoare triple?
    <p>
    \(
    \{P\} \; x := max(x, y) \; \{x = y\}
    \)
    <p>
    Is the following a correct Hoare triple?
    <p>
    \(
    \{(x \leq 0) \wedge (y \geq 0)\} \; x := max(x, y) \; \{x = y\}
    \)
    <p>
    

    
    
    <h2>Answers</h2>
    <ol>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge (\{P'\} \;  c \; \{Q\}) \quad
      \Rightarrow \quad \{P \vee P'\} \;  c \; \{Q\}
      \)
      <p>
      True.
      <p>
      Execution of command \(c\) in a state in which \(P\) holds takes the
      system to a state in which \(Q\) holds. Likewise,
      Execution of command \(c\) in a state in which \(P'\) holds takes the
      system to a state in which \(Q\) holds.
      Therefore execution of \(c\) in a state in which \(P\) or \(P'\)
      hold takes the system to a state in which \(Q\) holds.
      </li>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge ([P \Rightarrow P']) \quad
      \Rightarrow \quad \{P'\} \;  c \; \{Q\}
      \)
      <p>
      False. Here's an example:
      <p>
      \(
      (\{x = 0\} \;  x = 2*x \; \{x = 0\}) \wedge ([x = 0 \Rightarrow
    x \geq 0]) \quad
      \Rightarrow \quad \{x \geq 0\} \;  c \; \{x = 0\}
      \)
      <p>
      is False. Both terms in the antecedent (the left-hand side of
    the implication) are True but the consequent is False.
      
      </li>
      <li>
      \(
      (\{P\} \;  c \; \{Q\}) \wedge ([P' \Rightarrow P]) \quad
      \Rightarrow \quad \{P'\} \;  c \; \{Q\}
      \)
      <p>
      True
      <p>
      If \(c\) is executed in a state in which \(P'\) holds then ---
      because \([P' \Rightarrow P]\) --- \(P\) also holds in that
      state and so \(Q\) holds when \(c\) terminates.
      </li>
      <li>
      <pre>
      {x > 10}
      if x > 0 then x = -3*x else x = 2*x
      {x < 30}
      </pre>
      <p>
      True.
      <p>
      Because the precondition \(x > 10\) implies the if-clause (\(x >
      0\)), the above Hoare triple holds if the following triple holds
      <pre>
      {x > 10}
      x = -3*x
      {x < 30}
      </pre>
      We can check that this triple holds by substituting the right-hand
      side of the assignment statement to \(x\) for \(x\) in the
      postcondition: So we replace \(x < 30\) by:
      <p>
      \(
      -3*x < 30
      \)
      <p>
      Which is equivalent to \(x < 10\), which is satisfied by the precondition.
      
      </li>
      <li>
      <pre>
      {x < 10}
      if x < 0 then x = -3*x else x = 2*x
      {x < 30}
      </pre>
      <p>
      False.
      <p>
      When \(x = - 11\), the precondition is satisfied.
      The if-clause \(x < 0\) holds. So the assignment statement
      \(x = -3 *x\) is executed which makes \(x = 33\) which violates
      the postcondition.
      </li>
      <li>
      <pre>
      {x > 0}
      x = x + 10
      x = 2*x
      {x > 20}
      </pre>
      <p>
      True
      <p>
      Again we can verify this by working backwards from the
      postcondition. Substitute the right-hand side of the assignment
      to \(x\) for \(x\) in the postcondition; i.e. substitute \(
      2*x\) for \(x\) in \( x > 20\) to get  \(2*x > 20\). This is
      equivalent to \(x > 10\).
      <p>
      Now do the same step for the previous statement:
      \(x + 10 > 10\). This is equivalent to \(x > 0\) which is
      satisfied by the precondition.
      <p>
      We can annotate the program with assertions to make it clearer.
      <pre>
      {x > 0}
      x = x + 10
      {x > 10}
      x = 2*x
      {x > 20}
      </pre>
      </li>
    </ol>

    <h3 class="w3-text-teal">Question 2</h3>
    What is the weakest precondition \(P\) that satisfies the
    following Hoare triple?
    <p>
    \(
    \{P\} \; x := max(x, y) \; \{x = y\}
    \)

    <p class="w3-text-teal">Answer</p>
    Substitute the right-hand side, i.e., \(max(x, y)\), of the assignment for
    the left-hand side, i.e., \(x\), in the postcondition, i.e., \(x =
    y\) to get:
    <p>
    \(
    max(x, y) = y
    \)
    which simplifies to:
    <p>
    \(
    x \leq y
    \)
    <p>
    The answer is \(P \equiv (x \leq y)\), and we have the following
    Hoare triple:
    <p>
    \(
    \{x \leq y\}  \; x := max(x, y) \; \{x = y\}
    \)
    

    <p class="w3-text-teal">Question</p>
    Is the following a correct Hoare triple?
    <p>
    \(
    \{(x \leq 0) \wedge (y \geq 0)\} \; x := max(x, y) \; \{x = y\}
    \)
    

    <p class="w3-text-teal">Answer</p>
    Yes because \((x \leq 0) \wedge (y \geq 0)\) is stronger than the
    precondition \(x \leq y\), i.e.,
    <p>
    \(
    [((x \leq 0) \wedge (y \geq 0)) \quad \Rightarrow \quad (x \leq y)]
    \)