    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Self Tests: Earliest Meeting Time</h1>
    A student wants to schedule a doctoral thesis examination. She
    wants to find the earliest day at which the professors on her
    thesis committee can meet.
    <p>
    Associated with professor \(j\) is a
    function \(f_{j}\) where \(f_{j}(d)\) is the
    earliest day at, or after, day \(d\) that professor \(j\) can meet.
    The student starts scheduling on day 0.

    
    <p>
    Some professors don't talk to others, and some don't listen while
    others talk.
    The set of professors form a directed graph in which there is an
    edge \((j, k)\) exactly when professor \(k\) can read professor
    \(j\)'s state.
    We assume that there is an edge \((j, j)\) for all \(j\) because
    professors do like to hear themselves talk.
    The graph is strongly connected, i.e, there is directed path from
    each professor to every professor.

    <p>
    Day \(d\) is a <i>possible meeting time</i> exactly when all
    professors can meet on day \(d\):
    <br>
    \(
    \forall j:\; d_{j} = d
    \)

    <p>
    Professors are busy; so scheduling a thesis committee is
    difficult. Assume that there is some day, perhaps in the far
    distant future, at which all professors can meet. Let \(m\) be the
    earliest possible meeting time.
    <h4 class="w3-text-teal">Specification</h4>
    Associated with each agent \(j\) is an integer variable
    \(d_{j}\).
    Prove that the following iteration terminates in a state in which 
    for all \(j\): \(d_{j} = m\), where \(m\) is the earliest meeting
    time.

    <h3 class="w3-text-teal">Agent Actions</h3>
    Initially:
    \(d_{j} = 0\)
    <p>
    For all edges \((j,k)\):
    <p>
    \(
    d_{k} < f_{k}(d_{j})  \; \rightarrow \; d_{k} = f_{k}(d_{j})
    \)

    <h2 class="w3-text-teal">Self Test: Proof of Correctness</h2>
    
    <h5 class="w3-text-teal">Test 1</h5>
    Give and prove an invariant of the loop.
    
    <h5 class="w3-text-teal">Test 2</h5>
    Prove that the loop terminates by giving a variant function for
    the loop. 
    
    <h5 class="w3-text-teal">Test 3</h5>
    Show that the specification holds upon termination of the loop.

    <h3 class="w3-text-teal">Answers</h3>
   
    <h5 class="w3-text-teal">Answer 1</h5>
    The invariant is: For all \(j\):
    <p>
    \(
    d_{j} \leq m
    \)
    </p>
    This condition holds initially because \(m \geq 0\).
    <p>
    If this condition holds when a guarded command with a true guard
    is executed then the condition continues to hold after the command
    is executed.
    The proof is straightforward.

    <h5 class="w3-text-teal">Answer 2</h5>
    <p>
    A variant function \(f\) is the sum over all professors \(j\) of
    the number of days remaining to reach the earliest meeting time
    from the professor's current estimate of \(d_{j}\):
    <p>
    \(
    \sum_{j} (m - d_{j})
    \)
    <p>
    This function is bounded below. This function takes on integer
    values. An execution of a guarded command with a true guard
    reduces the value of this function because it increases \(d_{j}\)
    for some \(j\).

    <h5 class="w3-text-teal">Answer 3</h5>
    We are required to show that if the invariant holds and all guards
    are false then the specification is satisfied.
    <p>
    If all the guards are false then you can show, quite easily, that all the
\(d_{j}\) are identical.
Let \(d\) be the common value of \(d_{j}\).
Because there is an edge from \(j\) back to itself, \(f_{j}(d) = d\).
Therefore, \(d\) is a possible meeting time.
<p>
From the invariant there exists no meeting time before \(d\), and so
    the result follows.