  <!--------------------------------------------------------->
  <h2 class="w3-text-teal">State Transition Systems and Graphs</h2>
  We represent the states and state transitions of a system by a <a
  href="https://en.wikipedia.org/wiki/Directed_graph">directed
  graph</a> in which vertices represent states and edges represent
  transitions.

  A <i>computation</i> (also called <i>trajectory</i>) is a path
through the graph.
An empty path is also a computation.
  In this module we treat vertex and state, edges and state
  transitions, computations and paths as equivalent. 


  <h3 class="w3-text-teal">Safety Proof Obligation</h3>
  Let \(init\) be the set of initial states of the system.
  The system can start in any state in \(init\).
  We assume that \(init\) is not empty.

  <p>
  Let  \(safe\) be a set of states where we want to prove that all
  computations that start in states in \(init\) remain in
  \(safe\).
    <hr class="new2">
    <p style="color:blue;">
    Our proof obligation is to show that every state on every path
    from every state in \(init\) is in \(safe\).
    </p>
    <hr class="new2">
    <p>


<!----------------------------------------------->
<h3 class="w3-text-teal">Stable</h3>
<i>stable</i> is a function from sets of vertices to the Booleans.
\(stable(P)\) holds exactly when every edge from a vertex in \(P\) is
to a vertex in \(P\).
</p>



<figure>
  <img src="StablePaths.jpg" alt="Fig5" style="width:50%">>
  <figcaption>Fig.4 - Paths from a stable set remain in the set</figcaption>
</figure>

<p>
Because there are no edges from inside a stable set to outside the
set, there are also no paths from inside a stable set to outside the
set.
There may,however, be paths from outside a stable set into the set.
</p>


<!-------------------------------------------------->
<h3 class="w3-text-teal">How to Prove Safety: Invariants</h3>
<hr class="new2">
<h5 style="color:blue;">
We prove safety
by finding a stable vertex set \(I\) such that:
</p>

<p>
\(
init \subseteq I \subseteq safe \quad
\)
</h5>
<hr class="new2">

<figure>
  <img src="Invariant_Slide1.jpg" alt="Fig6" style="width:50%">>
  <figcaption>Fig.5 - Illustration of Invariant I</figcaption>
</figure>

<p>
Any stable vertex set \(I\) that satisfies the above equation, \(init
\subseteq I \subseteq safe\), is called an <i>invariant</i> of the
graph.  Because \(I\) is stable, all paths from \(I\) remain within
\(I\).  So all paths from \(init\) remain within \(I\).  Therefore,
all paths from \(init\) remain within \(safe\).

<p>
 We discharge our safety proof obligation by finding an
invariant. 
A system may have many invariants; all we have to do is find any one.
</p>

<!----------------------------------->
<h3  class="w3-text-teal">Definition in Terms of Predicates</h3>
The concepts defined in terms of graphs extend to definitions in terms
of
<a href="../Predicates/Predicates.html">predicates</a> on states in
the obvious way:
A predicate corresponds to the set of vertices which is the extension
of the predicate.
Next, we summarize the definitions in terms of predicates.
<p>
A predicate \(P\) is stable exactly when execution of all commands in which
\(P\) holds terminate in states in which \(P\) continues to hold.
In the terms of Hoare triples, \(P\) is stable exactly when, for all
commands \(c\):
<p>
\(
\{P\} \: c \: \{P\})
\)
<p>
Let \(init\) be a predicate that holds initially. Then \(P\) is an
invariant exactly when:
<p>
\(
[init \Rightarrow P] \wedge stable(P)
\)

<!----------------------------------->
<h3  class="w3-text-teal">Summary</h3>
This module presents the key concepts used to prove safety in this
course. 
We showed how state-transition systems are represented as directed
graphs. We showed how safety can be defined in terms of 
paths in graphs. We defined the concepts <i>stable</i> and
<i>invariant</i> in terms of edges and paths in graphs, and we showed
how these concepts are used to prove safety.