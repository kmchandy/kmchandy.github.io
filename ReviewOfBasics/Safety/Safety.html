<title>ReviewOfBasics/Safety/Safety.html</title>
<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
</style>


<body>
<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>

<nav
class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5
w3-animate-left" 
id="mySidebar">

<a href="javascript:void(0)"
onclick="w3_close()"
class="w3-right w3-xlarge w3-padding-large w3-hover-black
w3-hide-large"
title="Close Menu">
<i class="fa fa-remove"></i>
</a>

<!--END Heading  ---------------------------->
 
<!-- Start Sidebar----------> 
 
<a class="w3-bar-item w3-button w3-hover-black "
href="../Introduction/Introduction.html" > 
Review: Introduction
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../Loops/Loops.html" > 
Nondeterministic Iteration
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../Predicates/Predicates.html" > 
Predicates
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../HoareTriples/HoareTriples.html" > 
Hoare Triples
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../Invariant/Invariant.html" > 
Invariant
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../LoopTermination/LoopTermination.html" > 
Loop Variants
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ExamplesCorrectnessProofs/ExamplesCorrectnessProofs.html" > 
Correctness Proofs: Examples
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../Safety/Safety.html" > 
Proving Safety
</a>

</nav>
<!-- End Sidebar---------->
 
<!-- Start overlay ---------------------------------->

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large"
  onclick="w3_close()"
  style="cursor:pointer"
  title="close side menu"
  id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">

<!-- End overlay ---------------------------------->
  <!--------------------------------------------------------->
<h2 class="w3-text-teal">Proving Safety</h2>
In this module we use methods for reasoning about sequential programs
--- reviewed in the previous modules of this chapter ---
to reason about the safety of concurrent systems.

<p>
  We represent the states and state transitions of a system by a <a
  href="https://en.wikipedia.org/wiki/Directed_graph">directed
  graph</a> in which vertices represent states and edges represent
  transitions.

  A <i>computation</i> (also called <i>trajectory</i>) is a path
through the graph.
An empty path is also a computation.
In this module the following are equivalent:
vertex and state, edges and state transitions, computations and
paths.
<p>
We begin by introducing <i>stable sets of states</i> and then describe
how we prove safety for both sequential and concurrent programs.

<!----------------------------------------------->
<h3 class="w3-text-teal">Stable Sets of Vertices</h3>
A set of vertices is stable exactly when every edge from a vertex in
the set is to a vertex in the set.
<p>
Because there are no edges from inside a stable set to outside the
set, there are also no paths from vertices inside a stable set to
vertices outside the set.
There may, however, be paths from outside a stable set into the set.
</p>



<figure>
  <img src="StablePaths.jpg" alt="Fig5" style="width:50%">>
  <figcaption>Fig.4 - Paths from a stable set remain in the set</figcaption>
</figure>


  <h3 class="w3-text-teal">Safety Proof Obligation</h3>
  Let \(init\) be the set of initial states of the system.
  The system can start in any state in \(init\).
  We assume that \(init\) is not empty.

  <p>
  Let  \(safe\) be a set of states where we want to prove that all
  computations that start in states in \(init\) remain in
  \(safe\).
    Our safety proof obligation is to show that every state on every path
    from every state in \(init\) is in \(safe\).
</p>

<hr class="new2">
<h5 style="color:blue;">
We prove safety
by finding a stable vertex set \(I\) such that:
</p>

<p>
\(
init \subseteq I \subseteq safe \quad
\)
</h5>
<hr class="new2">

<figure>
  <img src="Invariant_Slide1.jpg" alt="Fig6" style="width:50%">>
  <figcaption>Fig.5 - Illustration of Invariant I</figcaption>
</figure>

<p>
Because \(I\) is stable, all paths from \(I\) remain within
\(I\).  Because \(init\) is a subset of \(I\), all paths from \(init\)
remain within \(I\). 
All paths from \(init\) remain within \(safe\) because \(I\)
is in \(safe\).

<h3  class="w3-text-teal">Invariant</h3>
An invariant set of vertices is a stable set that includes \(init\).

<!----------------------------------->
<h3  class="w3-text-teal">Definition in Terms of Predicates</h3>
The concepts defined in terms of graphs extend to definitions in terms
of
<a href="../Predicates/Predicates.html">predicates</a> on states in
the obvious way:
The extension of a predicate \(P\) is the set of states for which the
predicate holds.
<p>
A predicate \(P\) is stable exactly when execution of all commands in
states in which
\(P\) holds terminate in states in which \(P\) holds.
In the terms of Hoare triples, \(P\) is stable exactly when, for all
commands \(c\):
<bf>
\(
\{P\} \: c \: \{P\}
\)
<p>
We use the following method to prove that a predicate \(safe\) holds
for all states in all computations starting in states where \(init\)
holds. We find any predicate \(I\) such that: 
<p>
\(
[init \Rightarrow I] \wedge [I \Rightarrow safe] \wedge stable(I)
\)
<p>
\(I\) is an invariant exactly when:
\(
[init \Rightarrow I] \wedge stable(I)
\)

<!----------------------------------->
<h3  class="w3-text-teal">Summary</h3>
This module presents the key concepts used to prove safety in this
course. 
We showed how state-transition systems are represented as directed
graphs. We showed how safety can be defined in terms of 
paths in graphs. We defined the concepts <i>stable</i> and
<i>invariant</i> in terms of edges and paths in graphs, and we showed
how these concepts are used to prove safety.
<!--Start Footer--------------------------------------->
<h5 style="color:red;">
<a href="../../index.html">Contents</a>

</h5>

    <div class="w3-container w3-theme-l1">
      <p>K. Mani Chandy,
      <br>
      Simon Ramo Professor, Emeritus,
      <br>
      California Institute of Technology</p>
    </div>
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
