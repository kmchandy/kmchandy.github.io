<title>ChannelSnapshots/LogicalClocksNew.html</title>

<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>


<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>
  
  <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">
  
  <!--------------------------------------------------------->
  <!--------------------------------------------------------->
<h2 class="w3-text-teal">Vector Clocks</h2>

<p class="w3-text-green">
  This page uses material from
  <a
  href="https://kmchandy.github.io/ChannelSnapshots/ChannelSnapshots.html">
  GlobalSnapshots.
  </a>
  </p>



The logical clock algorithm ensures that if there is a path from event
\(e'\) to event \(e\) in the causality graph then logical times have
the property \(t(e') < t(e)\).  Vector clocks ensure that the converse
also holds.  The specification for the vector time \(t(e)\) for an
event \(e\) is:

<p style="color:blue;">
\(t(e') < t(e)\) if and <i>only if</i> there is a path in the
causality graph from \(e'\) to \(e\).
</p>


<p>
A vector time for an event \(e\) is a vector \(V(e)\) of length \(N\)
where \(N\) is the number of agents in the system.

Let \(V_{j}(e)\) be the \(j\)-th element of vector \(V(e)\).
For events \(e'\) and \(e\) at the same agent \(j\), if \(e'\)
precedes \(e\), then set \(V_{j}(e)\) to any value such that:

<p>
\(
V_{j}(e) > V_{j}(e') 
\)

<p>
A message \(M\) is assigned a timestamp \(T(M)\) which is the vector
time of the event in which the message is sent.  Let \(e\) be an event
at an agent \(j\) where message \(M\) is received in the event, and
let \(e'\) be the event that immediately precedes \(e\) at agent \(j\). Then:
<p>
\(
\forall k \neq j:
V_{k}(e) = \textrm{max}(V_{k}(e'), T_{k}(M))
\)


<!--------------------------------------------->
<h4 style="color:red;">Example of Vector Clocks</h4>
<figure>
    <img src="../ChannelSnapshots/Timelines/Timelines.005.jpeg" alt="Fig5" style="width:100%">
    <figcaption>Fig. 5: Example of Vector Clocks</figcaption>
</figure>
In this figure, the \(n\)-th event at an agent is shown as a circle
containing the number \(n\). Vector timestamps have 3 elements
corresponding to agents 0, 1, and 2.

<p>
Let \(U, V, W \) be the vector timestamps for for event number 2 at
agent 0, event number 3 at agent 0, and event number 1 at agent 1.
What values can \(V\) have?

<p>
The algorithm requires:
<p>
\(
V_{0} > U_{0} = 2
\)
<p>
\(
V_{1} = \textrm{max}(U_{1}, W_{1}) = \textrm{max}(0, 1) = 1
\)
<p>
\(
V_{2} = \textrm{max}(U_{2}, W_{2}) = \textrm{max}(1, 0) = 1
\)
<p>

<!--------------------------------------------->
<h4 class="w3-text-teal">Proof of Correctness</h4>
The proof that the vector clock algorithm satisfies its specification
is straightforward.



<h4 class="w3-text-teal">Next</h4>
Next look at 
-- <a href="../Paxos/ConsensusImpossible.html">consensus algorithms</a>
or <a href="../table_of_contents.html">other types of algorithms</a>.



<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
