<title>ChannelSnapshots/ChannelSnapshotsSelfTest.html</title>
<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>
<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>

<nav
class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5
w3-animate-left" 
id="mySidebar">

<a href="javascript:void(0)"
onclick="w3_close()"
class="w3-right w3-xlarge w3-padding-large w3-hover-black
w3-hide-large"
title="Close Menu">
<i class="fa fa-remove"></i>
</a>

<!--END Heading  ---------------------------->
 
<!-- Start Sidebar----------> 
 
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/ChannelSnapshots.html" > 
Global Snapshots
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/LogicalClocks.html" > 
Logical Clocks
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/GlobalSnapshotAlgorithmVideo.mp4" > 
Snapshots: Video
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/ChannelSnapshotsSelfTest.html" > 
Snapshots: Self Test
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/ChannelSnapshotsAssignment/ChannelSnapshotsAssignment.html" > 
Snapshots: Assignment
</a>
<a class="w3-bar-item w3-button w3-hover-black "
href="../ChannelSnapshots/ChannelSnapshotsAssignment/ChannelSnapshotsAssignmentSolution.html" > 
Snapshots: Solution
</a>

</nav>
<!-- End Sidebar---------->
 
<!-- Start overlay ---------------------------------->

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large"
  onclick="w3_close()"
  style="cursor:pointer"
  title="close side menu"
  id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">
  
<script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">

<!-- End overlay ---------------------------------->


    <!--------------------------------------------------------->
    <h1 class="w3-text-teal">Global Snapshots: Self Test</h1>
    <!--------------------------------------------------------->   

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 1</h2>
    <!--------------------------------------------------------->
    A system has two agents \(A\) and \(B\) and a channel \(x\) from
    \(A\) to \(B\) and a channel \(y\) from \(B\) to \(A\). Initially
    both channels are empty.
    <p>
    Let \(T\) be a point on \(A\)'s timeline
    after \(A\) has sent exactly 2 messages on channel \(x\) and has
    received exactly 3 messages on channel \(y\).
    <p>
    Let \(T'\) be a point on \(B\)'s timeline
    after \(B\) has sent exactly 4 messages on channel \(y\) and has
    received exactly 3 messages on channel \(x\).
    <p>
    True or False? The cut through the points \(T\) and \(T'\) is a
    consistent cut.

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 2</h2>
    <!--------------------------------------------------------->
    The figure below has two diagrams. Both diagrams show timelines
    for agents \(A\) and \(B\), with message lines shown in red, with
    the marker lines shown in green. The top diagram showns a point in
    which agent \(B\) records its local state and and sends a marker
    on its only outgoing channel which is to agent \(B\).
    <figure>
    <img src="ChannelSnapshotsSelfTest/Slide1.jpg" alt="Fig1" style="width:80%">
    <figcaption>Fig.1: Question 2</figcaption>
    </figure>
    The diagram at the bottom shows a later point. When agent \(A\)
    gets the marker, it records its state because it hasn't done so
    already, and it sends a marker out on its only outgoing channel.
    <p>
    In this diagram, what are the states of the channels from \(A\) to
    \(B\) and from \(B\) to \(A\)?

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 3</h2>
    <!--------------------------------------------------------->
    The figure below has two diagrams. Both diagrams show timelines
    for agents \(A\) and \(B\), with message lines shown in red, with
    the marker lines shown in green. The top diagram showns a point in
    which agent \(B\) records its local state and and sends a marker
    on its only outgoing channel which is to agent \(B\).
    <figure>
    <img src="ChannelSnapshotsSelfTest/Slide2.jpg" alt="Fig2" style="width:80%">
    <figcaption>Fig.2: Question 3</figcaption>
    </figure>
    The diagram at the bottom shows a later point. Does the diagram
    show a correct execution of the marker algorithm to detect global
snapshots or an incorrect execution?

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 4</h2>
<!--------------------------------------------------------->
The agents in a system are connected as a directed tree with agent
    \(0\) as the root. There is a unique directed path from agent
\(0\) to every agent where the edges represent channels.

<p>
Agent \(0\) initiates the marker algorithm to compute a global
snapshot. All other agents record their states when they receive a
marker. 
<p>
True or False? The global state recorded by this algorithm shows that
all channels are empty.

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 5</h2>
<!--------------------------------------------------------->
The agents in a system are indexed \(j\) for \(0 \leq j \leq N\),
    where \(N > 1\). The only channels are from agent \(j\) to agent
\((j+1) \; \textrm{mod} \; N\).
<p>
Agent \(0\) initiates the marker algorithm to compute global
    snapshots. All other agents record their local states when they
receive a marker.
<p>
True or False? The global state recorded by this algorithm shows that
all channels are empty.

    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 6</h2>
<!--------------------------------------------------------->
The figure shows two diagrams. Timestamps are shown for events.
    <figure>
    <img src="ChannelSnapshotsSelfTest/Slide6.jpg" alt="Fig3" style="width:80%">
    <figcaption>Fig.3: Question 6</figcaption>
</figure>
<p>Part A</p>
True or False?
The timestamps for the top diagram satisfy the logical clock
requirement.

<p>Part B</p>
True or False?
The timestamps for the bottom diagram satisfy the logical clock
requirement.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 7</h2>
<!--------------------------------------------------------->
The figure shows two diagrams. Timestamps are shown for events.
    <figure>
    <img src="ChannelSnapshotsSelfTest/Slide7.jpg" alt="Fig4" style="width:80%">
    <figcaption>Fig.4: Question 7</figcaption>
The figure also shows cuts at logical time 22 and 35.
<p>
True or False? There is a trajectory from the (global) state
    corresponding to the cut at logical time 22 to 
the cut at logical time 35.



<!--------------------------------------------------------->
    <h1 class="w3-text-teal">Answers</h1>
<!--------------------------------------------------------->

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 1</h2>
<!--------------------------------------------------------->
False
<p>
A cut is consistent if and only if the number of messages sent along a
    channel before the sender records its state is at least the number
    of messages received along the channel before the receiver records
    its state. This condition is violated for channel \(x\).

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 2</h2>
<!--------------------------------------------------------->
The state of a channel is the sequence of messages received after the
    receiver takes its snapshot and before the receiver receives a
marker along that channel.

<p>
Agent \(A\) takes its snapshot when it receives a marker from agent
\(B\). So, the state of the channel from \(B\) to \(A\) in the global
snapshot is the empty sequence.

    <figure>
    <img src="ChannelSnapshotsSelfTest/Slide8.jpg" alt="Fig5" style="width:80%">
    <figcaption>Fig.5: Answer 2</figcaption>

<p>
The state of the channel from \(A\) to \(B\) is illustrated in the
diagram. It is the sequence of messages received after \(B\) records
its local state to the point at which \(B\) receives the marker from
\(A\). There are 3 such messages.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 3</h2>
<!--------------------------------------------------------->
False
<p>
An agent sends markers on all its outgoing channels when it records
    its state. In this case, agent \(A\) records its state, then sends
    a message, and only then sends a marker on an outgoing channel.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 4</h2>
<!--------------------------------------------------------->
True
<p>
Each agent records its state when it receives a marker from its only
    incoming channel. So, the state of that channel is recorded as the
    empty state.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 5</h2>
<!--------------------------------------------------------->
False.
<p>
The state of the channel in to agent \(j\), for all \(j \neq 0\), will be
    recorded as empty. The state of the channel from agent \(N-1\) to
    agent \(0\) is the sequence of messages that agent \(0\) receives
    after recording its local state and before receiving the marker
    from agent \(N-1\), and this sequence may not be empty.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 6</h2>
<!--------------------------------------------------------->
Part A: False
<p>There is an edge from a higher-timestamp (20) event to a
lower-timestamp (15) event.
<p>
Part B: False
<p>There is an edge from a higher-timestamp (15) event to a
    lower-timestamp (14) event.

<!--------------------------------------------------------->
    <h2 class="w3-text-teal">Question 7</h2>
<!--------------------------------------------------------->
True
<p>
There always exists a path in the state-transition diagram from the
    state corresponding to a logical time \(T\) to the state at a
    logical time \(T'\) for \(T' \geq T\).
<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
