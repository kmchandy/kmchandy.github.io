<title>ChannelSnapshots/PartiallySynchronousAlgorithms.html</title>

<!------------- Start Heading -------------------------------->
<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto">

<link rel="stylesheet"
href="https://www.w3schools.com/lib/w3-theme-blue.css">

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
/* Thick blue border */
hr.new2 {
  border: 2px solid blue;
}
/* blue border */
hr.new1 {
  border: 2px solid blue;
}
</style>


<body>


<div class="w3-top">
<div class="w3-bar w3-theme w3-top w3-left-align w3-large">
  
  <a class="w3-bar-item w3-button w3-right w3-hide-large
  w3-hover-white w3-large w3-theme-l1"
  href="javascript:void(0)"
  onclick="w3_open()">
  <i class="fa fa-bars"></i></a>

  <a href="../index.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Distributed Algorithms
  </a>

  <a href="../table_of_contents.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Contents
  </a>

  <a href="../cross_reference.html"
  class="w3-bar-item w3-button w3-hide-small w3-hover-white">
  Index
  </a>
    
  </div>
  </div>
  
  <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
<div class="w3-row w3-padding-64">
<div class="w3-twothird w3-container">


    <!--------------------------------------------------------->
    <h2 class="w3-text-teal">Trajectories as Sequences of Rounds</h2>
    
  In this section we consider distributed systems in
  which messages can get lost.
  We describe a framework that allows us
  to reason about distributed algorithms by analyzing
   trajectories consisting of sequences of rounds where all messages sent
  in a round are received in the same round.

  <p>
  The central idea is a <i>sync clock</i>, which is an extension of a
  logical clock. The time on a sync clock is called a sync time. A
  sync time is a tuple \([r, t]\) where \(r\) is called the <i>round
  number</i> and \(t\) is the relative time within a round. Both \(r\)
  and \(t\) 
  are total orders which are integers in the examples.

  <p>
  A sync clock is a logical clock with the following additional
  requirement.
  <hr class="new2">
  <h5 style="color:blue;">
  Sync clock requirement: 
  A message sent when the sender's sync time is \([R, T]\) and which
  arrives at the receiver when the receiver's sync time is \([R', T']\)
  is discarded if \(R' > R\).
  </h5>
  <hr class="new2">
  A discarded message has exactly the same effect as a lost message.
  A lost
  message is merely deleted from its channel --- it has no other
  effect on the state of the system.

  
  <h4 style="color:red;">Example: Trajectory with Sync Times</h4>

The figure below illustrates a trajectory with agents A and B.
  The two horizontal lines show the trajectories for agents A and
  B. The dark circles represent events. The red arrows represent
  messages that are sent and received, while blue dashed arrows
  represent messages that are sent but not received.

  <p>
  The tuple of numbers adjacent to an event
  is the sync time of the event.
  The number inside the circle representing an event is the round
  number of the event.
  For example, the third event (not counting the initial event) on
  agent A has sync time \([1, 2]\) and its round number is 1.

<figure>
    <img src="../ChannelSnapshots/Timelines/Timelines.008.jpeg"
    alt="Fig8" style="width:100%"> 
    <figcaption>Fig. 1: Trajectory with Sync Times</figcaption>
</figure>

<p>
For example, there is a message sent in the event with sync time [0,
1] on agent A to the event with sync time [0, 2] on agent B. The
message sent by A when A's sync time is [0, 3] arrives at agent B when
B's sync time is [1, 0]; this message is discarded because
\([0, 3] < [1, 0]\).

<p>
Events do not necessarily occur in a trajectory in increasing
order of sync times. For example, the event with sync time \([1, 0]\)
on agent B occurs earlier that the event with sync time \([0, 3]\) on
agent A.


<h3 class="w3-text-teal">Events in Order of Sync Times</h3>

<p class="w3-text-teal">Lemma</p>
A permutation \(Y\) of the sequence of events in a trajectory \(X\)
is equivalent to \(X\) if the events in \(Y\) occur in increasing
order of sync times.
Moreover, a message \(M\) that is discarded in \(X\) can be lost in
the equivalent trajectory \(Y\), where \(M\) is lost at any point
after it is sent.

<p>
The proof follows from (1) the theorem on events in order of logical times
because sync times are logical times, and (2) because a discarded
message is equivalent to a lost message.

<h4 style="color:red;">Example: Trajectory in Order Sync Times</h4>

The upper diagram in figure 2 is the trajectory shown in figure 1;
let's call this trajectory \(X\).
The lower diagram in figure 2 is a permutation \(Y\) of the trajectory in
the upper diagram. For example, the event with sync time [0, 3] at
agent A
appears after the event with sync time [1, 0] at agent B in \(X\)
whereas the order is flipped in \(Y\).
The theorem tells us that trajectories \(X\) and \(Y\) are equivalent.


<figure>
    <img src="../ChannelSnapshots/Timelines/Timelines.009.jpeg"
    alt="Fig9" style="width:100%"> 
    <figcaption>Fig. 2: Equivalent Trajectory in Order of Sync Times</figcaption>
</figure>




<h3 class="w3-text-teal">Trajectory as a Sequence of Rounds</h2>
In trajectories ordered by sync times, events with higher round
numbers appear after events with lower round numbers, i.e., an
with sync time \([R, T]\) appears after an events with sync time
\([R', T']\) if \(R' < R\). We partition the trajectory into rounds
where a round consists of all events with the same round number.

<p>
If \(X\) is a trajectory in which a message \(M\) is discarded then in
the equivalent trajectory \(Y\) we assume that \(M\) is lost before the
start of the next round. Therefore, all messages sent in a round are
received or lost in the same round. So, all channels are empty at the
start of each round.


<p>
Let \(S[i]\) be the global state at the start of round \(i\). Then
\(S[i]\) is specifed only by the states of agents.
We will find it helpful to reason about a trajectory as a
sequence of state transitions between rounds --- each transition is
from the start of one round to the start of the next one.
Instead of analyzing every state transition in a trajectory we
will find it helpful to
<ol>
  <li>
  first analyze the state transition of a single generic
  round: the transition from \(S[i]\) to \(S[i+1]\) for any \(i\), and
  then
  </li>
  <li>
  apply the reasoning about this generic transition to reason about
  the trajectory as a sequence of transitions \(S[0] \rightarrow S[1]
  \rightarrow S[2] \rightarrow \ldots\).
  </li>
</ol>

We will use this method to analyze algorithms such as Paxos.

<h4 style="color:red;">Example: Trajectory as a Sequence of Rounds</h4>
Figure 3 shows a trajectory partitioned into rounds. A message sent in
a round in this trajectory is received or lost in the same round.
For example, the message that is sent by
agent A in the event with sync time \([0, 3]\) in round 0 is lost in
round 0.

<figure>
    <img src="../ChannelSnapshots/Timelines/Timelines.010.jpeg"
    alt="Fig10" style="width:100%"> 
    <figcaption>Fig. 3: Transitions between Rounds</figcaption>
</figure>
All channels are empty at the start of each round. Pictorially no
    message line (red arrow or dashed blue line) crosses the boundary
between one round and the next. The global states \(S[i]\) at the
    boundary of each round is specified entirely by agent states.
<p>
We will reason about a trajectory as a sequence of transitions between
    the starts of rounds.

  
<!--Start Footer--------------------------------------->

    <hr class="new1">
      <p>K. Mani Chandy,
      Emeritus Simon Ramo Professor,
      California Institute of Technology</p>
    
</footer>
    


<!-- END MAIN -->




</body>
</html>
