<!---------------------------------------------------->
<h1 class="w3-text-teal">Snapshot Introduction: Self Test</h1>
<!---------------------------------------------------->

    <!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 1</h3>
    <!---------------------------------------------------->

    Given a timeline diagram of a trajectory and a sequence of
    consistent cuts \(c_{0}, c_{1}, \ldots, c_{n}\) of the timeline
    diagram where \(c_{0}\) and \(c_{n}\) are the initial and final
    states of the trajectory, and where \(c_{i} \subset c_{i+1}\), for
    all \(i\). Let \(S_{i}\) be the global state associated with cut
    \(c_{i}\). 
    <p>
    Does there exists a trajectory that visits the states \(S_{i}\) in
    order, i.e., starts at \(S_{0}\) and then visits \(S_{1}\) and
    then visits \(S_{2}\), and ... visits \(S_{n}\)?

    <!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 2</h3>
    <!---------------------------------------------------->
    Let \(C\) and \(C'\) be consistent cuts of a timeline diagram. Is
    it possible that there is an event \(e\) which is in \(C\) but
    not in \(C'\), and another event \(e'\) which is in \(C'\) but
    not in \(C\)?
    <p>
    Another way of asking the same question is as follows. Does the
    following always hold?
    <p>
    \(
    (C \subseteq C') \vee (C' \subseteq C)
    \)
    </p>

    <!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 3</h3>
    <!---------------------------------------------------->
    The constraint on timestamps in logical clocks allows the clock to
    tick forward without a change in the state of the system. For
    example, in figure 2, timestamps 11, 12, 13, ... 17 correspond to
    the same state. Develop an algorithm by which different timestamps
    correspond to different states.

    

    
    <!---------------------------------------------------->
    <h2 class="w3-text-teal">Question 4</h2>
    <!---------------------------------------------------->
<figure>
  <img src="TimelineDiagramsSelfTestSlide1.jpg" alt="Fig1" style="width:80%">>
  <figcaption>Vector Timestamps</figcaption>
</figure>
This question is about vector clocks which are described in the video
<br>
https://kmchandy.github.io/SnapshotIntroduction/VectorClocksVideo.mp4

<p>
The figure is a part of a timeline diagram with three agents, A, B,
C. The edges of the diagram are timestamped with vectors of size 3
which correspond to timestamps of components A, B, C, in that order.
For example the top horizontal edge has vector timestamp [10, 11, 2]
which correspond to a timestamp 10 for agent A, 11 for agent B, and 2
for agent C.
<p>
The diagram shows 3 events indexed 1, 2, 3. The inputs to event 3 have
vector timestamps [10, 11, 2], [7, 15, 6] and [3, 12, 8]. What is the
smallest vector timestamp of the output edge from event 3? Assume that
the elements of vector timestamps are integers.
<p>
<i>Note that event 3 reads the states of agents A, B, and C, but
modifies the state of only agent B, but does not modify the states of
agents A and C.</i>

    <!---------------------------------------------------->
    <h2 class="w3-text-teal">Question 5</h2>
<!---------------------------------------------------->
Variation of question 4:

<figure>
  <img src="TimelineDiagramsSelfTestSlide2.jpg" alt="Fig1" style="width:80%">>
  <figcaption>Vector Timestamps</figcaption>
</figure>
This question is about vector clocks which are described in the video
<br>
https://kmchandy.github.io/SnapshotIntroduction/VectorClocksVideo.mp4

<p>
The figure is a part of a timeline diagram with three agents, A, B,
C. The edges of the diagram are timestamped with vectors of size 3
which correspond to timestamps of components A, B, C, in that order.
For example the top horizontal edge has vector timestamp [10, 11, 2]
which correspond to a timestamp 10 for agent A, 11 for agent B, and 2
for agent C.
<p>
The diagram shows 3 events indexed 1, 2, 3. The inputs to event 3 have
vector timestamps [10, 11, 2], [7, 15, 6] and [3, 12, 8]. What is the
smallest vector timestamp of the output edge from event 3? Assume that
the elements of vector timestamps are integers.
<p>
<i>Note that event 3 reads the states of agents A, B, and C, and also
modifies the state of all three agents, A, B, C.</i>




    <!---------------------------------------------------->
    <h1 class="w3-text-teal">Answers</h1>
<!---------------------------------------------------->
<!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 1</h3>
<!---------------------------------------------------->
Yes, there exists such a trajectory. The proof is a straightforward
    extention of the
theorem about the snapshot visited in a trajectory.
<p>
Consider a permutation of events in the given trajectory where the
    ordering of events are the same as in the given trajectory except
    that events
    in \(c_{0}\) occur first, and then events in \(c_{1}\)
    that are not in \(c_{0}\), and and then events in \(c_{2}\)
that are not in \(c_{1}\), and so on.
This permutation of events is also a trajectory because the order of
    dependent events is preserved. And this permutation visits the
states \(S_{i}\) in order.

<!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 2</h3>
<!---------------------------------------------------->
An example of cuts \(C\) and \(C'\) is as follows. Consider a computation:
<ol>
  <li> <code> x = x + 1</code></li>
  <li> <code> y = y + 1</code></li>
</ol>
Let \(C\) consist of event 1, and \(C'\) consist of event 2. Both
    \(C\) and \(C'\) are consistent cuts. And \(C\) contains event 1
    which is not in \(C'\), while \(C'\) contains event 2
which is not in \(C\).



<!---------------------------------------------------->
    <h3 class="w3-text-teal">Question 3</h3>
<!---------------------------------------------------->
Set the timestamp of an event \(e\) to 1 + the maximum of the
    timestamps of events \(e'\) with edges to \(e\) in the timeline
diagram.
<p>
A timestamp of a vertex is the length of the longest path to the vertex from the initial
    vertex (which is not shown). A longest path here is the one with
    the most hops.



    <!---------------------------------------------------->
    <h2 class="w3-text-teal">Question 4</h2>
<!---------------------------------------------------->
As the video shows, we first find the maximum of the vector timestamps
    of the input edges. The maximum of [10, 11, 2], [7, 15, 6] and [3,
12, 8] is [10, 15, 8].
<p>
Then we add [0, k, 0] for a positive value k. Why add [0, k, 0]?
    Because this event does not modify the states of agents A and C,
    and does modify the state of agent B. And, the vector timestamp
    shows the timestamps of agents A, B, C in that order.

The smallest value that
can be added is [0, 1, 0]. Adding this vector gives:
<br>
[10, 15, 8] + [0, 1, 0] = [10, 16, 8]

    
    <!---------------------------------------------------->
    <h2 class="w3-text-teal">Question 5</h2>
<!---------------------------------------------------->
As the video shows, we first find the maximum of the vector timestamps
    of the input edges. The maximum of [10, 11, 2], [7, 15, 6] and [3,
12, 8] is [10, 15, 8].
<p>
Then we add [1, 1, 1]. Why add [1, 1, 1]?
Because this event modifies the states of A, B, and C.
<p>
If the event only modified the states of A and B, but not C, we would
add [1, 1, 0].
Likewise if it modified the states of B and C, but not A, we would add
[0, 1, 1]
<p>

 Adding [1, 1, 1] gives:
<br>
[10, 15, 8] + [1, 1, 1] = [11, 16, 9]